"use strict";(self.webpackChunkmegaten_fusion_tool=self.webpackChunkmegaten_fusion_tool||[]).push([[979],{2009:(Ke,Ie,z)=>{z.d(Ie,{HI:()=>Ze,iJ:()=>et,eG:()=>tt,RT:()=>st,Se:()=>nt,I4:()=>ot,zm:()=>it});var Z=z(2598);class e{constructor(a,d){this.fuseNonelem=a,this.fuseElement=d}getFusions(a,d,m){let f=[];const c=d.isElementDemon(a)?this.fuseElement:this.fuseNonelem;for(const h of c)f=f.concat(h(a,d,m));return f}}function ve(_,a){if(!a.length)return-1;let d=0;for(const m of a)_>m&&d++;return d===a.length?d-1:d}function b(_,a,d){const m=[],{race:f,lvl:c}=a.getDemon(_);for(const[h,u]of Object.entries(d.getRaceFusions(f))){const l=a.getResultDemonLvls(u),k=l.map(g=>2*(g-d.lvlModifier)-c);for(const g of a.getIngredientDemonLvls(h)){const C=ve(g,k);if(-1!==C&&100!==l[C]&&(f!=h||c!=g)){const D=a.reverseLookupDemon(u,l[C]);m.push(D===_&&C+1<l.length?{name1:a.reverseLookupDemon(h,g),name2:a.reverseLookupDemon(u,l[C+1])}:{name1:a.reverseLookupDemon(h,g),name2:D})}}}for(const h of a.reverseLookupSpecial(_)){const u=a.getSpecialNameEntries(h);if(2===u.length){const l=u[0]===_?u[1]:u[0];for(const k of m)k.name1===l&&(k.name2=h)}}return m}function Ce(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=d.getRaceFusions(m)[m],h=a.getIngredientDemonLvls(m).filter(l=>l!==f),u=[];if(c&&a.isElementDemon(c))for(const l of h)u.push({name1:a.reverseLookupDemon(m,l),name2:c});return u}function ue(_,a,d){const m=[],{race:f,lvl:c}=a.getDemon(_),h=[0,0].concat(a.getResultDemonLvls(f),[100,100]);h.indexOf(c)<0&&(h.push(c),h.sort((g,C)=>g-C));const u=h.indexOf(c),l=d.getElemModifiers(f),k=Object.keys(l).map(g=>parseInt(g,10));for(const g of k){const C=h[u+g];if(0!==C&&100!==C){const D=a.reverseLookupDemon(f,C);for(const I of l[g])m.push({name1:I,name2:D})}}return m}function oe(_,a,d){const m=[];for(const[f,c]of Object.entries(d.getElemFusions(_))){const h=a.getResultDemonLvls(f).filter(k=>k<100),u=c<0?h.slice(-1*c):h.slice(0,-1*c),l=c<0?h.slice(0,c):h.slice(c);for(let k=0;k<u.length;k++)m.push({name1:a.reverseLookupDemon(f,u[k]),name2:a.reverseLookupDemon(f,l[k])})}return m}function re(_,a,d){const m=[],f=d.getElemFusions(_);for(const{race:c,lvl:h,name:u}of a.specialDemons){const l=f[c];if(l){const k=(D,I)=>h>I?D+1:D,g=a.getResultDemonLvls(c).filter(D=>D<100),C=l+g.reduce(k,0);0<C&&C<g.length&&m.push({name1:u,name2:a.reverseLookupDemon(c,g[C])})}}return m}function O(_,a,d){return[]}function S(_,a,d){const m=[],f=a.getSpecialNamePairs(_);if(f.length>0)if(f[0].name1===f[0].name2)_=f[0].name1;else if(_!==f[0].name1)return f;const{race:c,lvl:h}=a.getDemon(_),u=a.getResultDemonLvls(c),l=u.indexOf(h);if(-1===l)return[];const k=u[l-1]?2*(u[l-1]-d.lvlModifier):0,g=u[l+1]?2*(h-d.lvlModifier):200;for(const[C,D]of Object.entries(d.getRaceFissions(c)))for(const I of a.getIngredientDemonLvls(C)){const y=k-I,E=g-I;for(const v of D)for(const G of a.getIngredientDemonLvls(v))y<G&&G<=E&&(C!=v||I<G)&&m.push({name1:a.reverseLookupDemon(C,I),name2:a.reverseLookupDemon(v,G)})}return m}function L(_,a,d){const m=[],{race:f,lvl:c}=a.getDemon(_),h=Object.keys(d.getRaceFissions(f)).find(I=>"2"===I.charAt(0));if(!h)return m;const u=h.substring(1),l=a.getResultDemonLvls(u),k=l.indexOf(c);if(-1===k)return m;const g=l[k-2]||0,C=l[k-1]||0,D=l[k+1]?2*c:200;for(const[I,y]of Object.entries(d.getRaceFissions(u)))for(const E of a.getIngredientDemonLvls(I).filter(v=>v!==c))for(const v of y)for(const G of a.getIngredientDemonLvls(v).filter(H=>H!==c)){const V=E+G+d.lvlModifier;2*(E===C||G===C?g:C)<V&&V<=D&&m.push({name1:a.reverseLookupDemon(I,E),name2:a.reverseLookupDemon(v,G)})}return m}function w(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=[],h=d.getElemModifiers(m),u=Object.keys(h).map(g=>parseInt(g,10));if(a.getSpecialNamePairs(_).length||!u.length)return c;const l=[0,0].concat(a.getResultDemonLvls(m),[100,100]),k=[];for(const g of a.getIngredientDemonLvls(m)){const C=l.slice();C.indexOf(g)<0&&(C.push(g),C.sort((I,y)=>I-y));const D=C.indexOf(g);for(const I of u)C[D+I]===f&&k.push({ingName:a.reverseLookupDemon(m,g),elementOffset:I})}for(const g of k)for(const C of h[g.elementOffset])c.push({name1:g.ingName,name2:C});return c}function $(_,a,d){const m=a.getSpecialNamePairs(_).slice();for(const[f,c]of Object.entries(d.getRaceFissions(_))){const h=a.getIngredientDemonLvls(f);for(let u=0;u<h.length;u++)for(let l=u+1;l<h.length;l++)m.push({name1:a.reverseLookupDemon(f,h[u]),name2:a.reverseLookupDemon(f,h[l])})}return m}class q{constructor(a,d){this.fuseNonelem=a,this.fuseElement=d}getFusions(a,d,m){let f=[];const c=d.isElementDemon(a)?this.fuseElement:this.fuseNonelem;for(const h of c)f=f.concat(h(a,d,m));return f}}function R(_,a){if(!a.length)return-1;let d=0;for(const m of a)_>m&&d++;return d===a.length?-1:d}function Q(_,a,d){const{normalChart:m,tripleChart:f,raceOrder:c}=d,{race:h,lvl:u,currLvl:l}=a.getDemon(_),k=3*f.lvlModifier,g=[],C=f.getRaceFusions(h),D={};for(const[I,y]of Object.entries(C)){D[I]||(D[I]={}),h!==I&&(D[I][I]=y);for(const[E,v]of Object.entries(m.getRaceFissions(I))){D[E]||(D[E]={});for(const G of v)D[E][G]=y}}for(const[I,y]of Object.entries(D))for(const E of a.getIngredientDemonLvls(I)){const v=a.reverseLookupDemon(I,E),G=a.getDemon(v).currLvl;if(v!==_&&(l>G||l===G&&c[h]<c[I]))for(const[H,V]of Object.entries(y)){const ne=a.getResultDemonLvls(V),_e=ne.map(ae=>3*ae-k-u-E);for(const ae of a.getIngredientDemonLvls(H)){const ie=a.reverseLookupDemon(H,ae),Re=a.getDemon(ie).currLvl;if(ie!==v&&ie!==_&&(I!==H||E<ae)&&(l>Re||l===Re&&c[h]<c[H]))if(a.isElementDemon(V))g.push({name1:v,name2:ie,name3:V});else{const he=R(ae,_e);if(-1!==he){const De=a.reverseLookupDemon(V,ne[he]);De!==ie&&De!==v&&De!==_?g.push({name1:v,name2:ie,name3:De}):he+1<ne.length&&g.push({name1:v,name2:ie,name3:a.reverseLookupDemon(V,ne[he+1])})}}}}}return g}function de(_,a,d){const{normalChart:m,tripleChart:f,raceOrder:c}=d,{race:h,lvl:u,currLvl:l}=a.getDemon(_),k=3*f.lvlModifier,g=[],C={};C[h]=Object.assign({},f.getRaceFusions(h)),delete C[h][h];for(const[D,I]of Object.entries(m.getRaceFusions(h)))C[D]=f.getRaceFusions(I);for(const[D,I]of Object.entries(C))for(const y of a.getIngredientDemonLvls(D)){const E=a.reverseLookupDemon(D,y),v=a.getDemon(E).currLvl;if(E!==_)for(const[G,H]of Object.entries(I)){const V=a.getResultDemonLvls(H),ne=V.map(_e=>3*_e-k-u-y);for(const _e of a.getIngredientDemonLvls(G)){const ae=a.reverseLookupDemon(G,_e),ie=a.getDemon(ae).currLvl;if(ae!==E&&ae!==_&&(ie>l||ie===l&&c[G]<c[h])&&(ie>v||ie===v&&c[G]<c[D]))if(a.isElementDemon(H))g.push({name1:E,name2:ae,name3:H});else{const Re=R(_e,ne);if(-1!==Re){const he=a.reverseLookupDemon(H,V[Re]);he!==ae&&he!==E&&he!==_?g.push({name1:E,name2:ae,name3:he}):Re+1<V.length&&g.push({name1:E,name2:ae,name3:a.reverseLookupDemon(H,V[Re+1])})}}}}}return g}function $e(_,a){if(!a.length)return-1;let d=0;for(const m of a)_>m&&d++;return d===a.length?-1:d}const Ze=new Z.nKC("compendium.config"),et=new Z.nKC("fusion.data.service"),tt=new Z.nKC("fusion.trio.service"),nt=(new e([b,Ce,ue],[oe,re,O]),new e([b,Ce,ue,function W(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=[0,0].concat(a.getResultDemonLvls(m),[100,100]),h=c.indexOf(f),u=[];if(d.getLightDark(m)<0||-1===h)return u;const l=c[h+2],k=c[h+1],g=c[h-1],C=100!==l?a.reverseLookupDemon(m,l):"",D=100!==k?a.reverseLookupDemon(m,k):"",I=0!==g?a.reverseLookupDemon(m,g):"";for(const y of d.races)if(d.getLightDark(y)<0){const E=a.getIngredientDemonLvls(y);for(let v=0;v<E.length;v++){const G=E[v],H=a.reverseLookupDemon(y,G);f>=G?(f+G)%7==0?u.push({name1:H,name2:C}):(f+G)%5==0?u.push({name1:H,name2:D}):(f+G)%3==0?u.push({name1:H,name2:I}):(f+G)%2==0&&v>0&&u.push({name1:H,name2:a.reverseLookupDemon(y,E[v-1])}):(f+G)%2==0&&v<E.length-1?u.push({name1:H,name2:a.reverseLookupDemon(y,E[v+1])}):(f+G)%2==1&&u.push({name1:H,name2:"Slime"})}}return u.filter(y=>""!==y.name2)}],[oe,re,O]),new e([S,L,w,function N(_,a,d){const m=[],f=a.getSpecialNamePairs(_);if(0===f.length||_!==f[0].name1)return m;const c=a.getDemon(f[0].name2).race;for(const[h,u]of Object.entries(d.getRaceFissions(c)))for(const l of a.getIngredientDemonLvls(h))for(const k of u)for(const g of a.getIngredientDemonLvls(k))m.push({name1:a.reverseLookupDemon(h,l),name2:a.reverseLookupDemon(k,g)});return m}],[$]),new e([S,L,w,function T(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=[0,0].concat(a.getResultDemonLvls(m),[100,100]),h=c.indexOf(f),u=[];if(d.getLightDark(m)<0||-1===h)return u;const l=c[h-2],k=c[h-1],g=c[h+1],C=0!==l?a.reverseLookupDemon(m,l):"",D=0!==k?a.reverseLookupDemon(m,k):"",I=100!==g?a.reverseLookupDemon(m,g):"";for(const y of d.races)if(d.getLightDark(y)<0)for(const E of a.getIngredientDemonLvls(y)){const v=a.reverseLookupDemon(y,E);l>=E&&(l+E)%7==0&&u.push({name1:C,name2:v}),k>=E&&(k+E)%7!=0&&(k+E)%5==0&&u.push({name1:D,name2:v}),g>=E&&(g+E)%7!=0&&(g+E)%5!=0&&(g+E)%3==0&&u.push({name1:I,name2:v})}return u.filter(y=>""!==y.name1)}],[$]),new e([b,function ee(_,a,d){const m=[],{race:f,lvl:c}=a.getDemon(_),u=a.getIngredientDemonLvls(f).filter(k=>k!==c),l=a.getResultDemonLvls(f).filter(k=>k!==c).map(k=>2*k);for(const k of u){let C=l.reduce((I,y)=>c+k+2>=y?I+1:I,-1);l[C]/2===k&&(C-=1);const D=l[C]/2;D&&m.push({name1:a.reverseLookupDemon(f,k),name2:a.reverseLookupDemon(f,D)})}return m}],[])),st=new e([S,function pe(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=[];if(a.getSpecialNameEntries(_).length)return c;const h=a.getResultDemonLvls(m),u=h.indexOf(f);if(u<0)return c;const k=2*(f-1),g=h[u+1]?2*(h[u+1]-1):200,C=h[u+2]?2*(h[u+2]-1):200,D=a.getIngredientDemonLvls(m).filter(y=>y!==f),I=g/2+1;for(const y of D)I<y&&I+y<C&&c.push({name1:a.reverseLookupDemon(m,I),name2:a.reverseLookupDemon(m,y)});for(let y=0;y<D.length;y++){const E=D[y];for(let v=y+1;v<D.length;v++){const G=D[v];k<=E+G&&E+G<g&&c.push({name1:a.reverseLookupDemon(m,E),name2:a.reverseLookupDemon(m,G)})}}return c}],[]),it=new q([Q,de,function Oe(_,a,d){const{tripleChart:f}=d,{race:c,lvl:h}=a.getDemon(_),u=f.getRaceFusions(c)[c],l=[];if(!u)return l;const k=a.getIngredientDemonLvls(c).filter(D=>D!==h),g=a.getResultDemonLvls(c).filter(D=>D!==h),C=f.lvlModifier;for(let D=0;D<k.length;D++){const I=k[D],y=g.filter(v=>v!==I),E=a.reverseLookupDemon(c,I);for(let v=D+1;v<k.length;v++){const G=k[v],H=y.filter(ne=>ne!==G),V=a.reverseLookupDemon(c,G);if(a.isElementDemon(u))l.push({name1:E,name2:V,name3:u});else{const _e=R((I+h+G)/3+C,H);-1!==_e&&l.push({name1:E,name2:V,name3:a.reverseLookupDemon(c,H[_e])})}}}return l}],[]),ot=new q([function ye(_,a,d){const{normalChart:m,tripleChart:f,raceOrder:c}=d,{race:h,lvl:u}=a.getDemon(_),l=3*f.lvlModifier,k=[],g=a.getResultDemonLvls(h),C=g.indexOf(u);if(-1===C)return k;const D={};for(const[v,G]of Object.entries(f.getRaceFissions(h))){D[v]||(D[v]=[]);for(const H of G)D[H]||(D[H]=[]),v!==H&&D[v].push(H),D[H].push(v)}const I={};for(const[v,G]of Object.entries(D)){I[v]={};for(const H of G)for(const[V,ne]of Object.entries(m.getRaceFissions(H)))I[v][V]||(I[v][V]=[]),I[v][V]=I[v][V].concat(ne);for(const H of G)v!==H&&(I[v][H]||(I[v][H]=[]),I[v][H].push(H))}const y=g[C-1]?3*g[C-1]-l:0,E=3*u-l;for(const[v,G]of Object.entries(I))for(const H of a.getIngredientDemonLvls(v)){const V=a.reverseLookupDemon(v,H),ne=a.getDemon(V).currLvl;if(V!==_){const _e=y-H,ae=E-H;for(const[ie,Re]of Object.entries(G))for(const he of a.getIngredientDemonLvls(ie)){const De=a.reverseLookupDemon(ie,he),Ae=a.getDemon(De).currLvl;if(De!==V&&De!==_&&(ne>Ae||ne===Ae&&c[v]<c[ie])){const at=_e-he,lt=ae-he;for(const Ge of Re)for(const je of a.getIngredientDemonLvls(Ge)){const Te=a.reverseLookupDemon(Ge,je),Be=a.getDemon(Te).currLvl;Te!==De&&Te!==V&&Te!==_&&(ie!==Ge||he<je)&&(ne>Be||ne===Be&&c[v]<c[Ge])&&at<je&&je<=lt&&k.push({name1:V,name2:De,name3:Te})}}}}}return k},function ze(_,a,d){const{tripleChart:f}=d,{race:c,lvl:h}=a.getDemon(_),u=f.lvlModifier,l=[],k=a.getIngredientDemonLvls(c).filter(C=>C!==h),g=a.getResultDemonLvls(c);for(let C=0;C<k.length;C++){const D=k[C],I=g.filter(E=>E!==D),y=a.reverseLookupDemon(c,D);for(let E=C+1;E<k.length;E++){const v=k[E],G=I.filter(V=>V!==v),H=a.reverseLookupDemon(c,v);for(let V=E+1;V<k.length;V++){const ne=k[V],_e=G.filter(he=>he!==ne),ae=a.reverseLookupDemon(c,ne),Re=$e((D+v+ne)/3+u,_e);-1!==Re&&_e[Re]===h&&l.push({name1:y,name2:H,name3:ae})}}}return l},function ge(_,a,d){const{race:m,lvl:f}=a.getDemon(_),c=a.getResultDemonLvls(m).slice();if(0<c.indexOf(f)){const h=a.reverseLookupDemon(m,c[c.indexOf(f)-1]);return[].concat(Q(h,a,d).filter(l=>l.name3===_),de(h,a,d).filter(l=>l.name3===_)).map(l=>({name1:l.name1,name2:l.name2,name3:h}))}return[]}],[]);!function rt(_){const a={};for(let d=0;d<_.length;d++)a[_[d]]=d}(["wk","no","rs","st","nu","rp","dr","ab"])},3822:(Ke,Ie,z)=>{z.d(Ie,{S:()=>Qs});var Z=z(8935),e=z(2598),ve=z(7814),b=z(177),Ce=z(4412);let ue=(()=>{class n{constructor(t){this._edges$=new Ce.t({top:0,bottom:0,left:0,right:0,zIndex:10}),this.edges=this._edges$.asObservable(),this.parentEdges=t?t.edges:new Ce.t({top:0,bottom:0,left:0,right:0,zIndex:10}).asObservable()}nextEdges(t){this._edges$.next(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(n,12))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})(),oe=(()=>{class n{constructor(t,i,s){this.elementRef=t,this.renderer=i,this.edgesService=s,this.cPositionSticky=!0,this.sZIndex=0,this.subscriptions=[],this._edges={top:0,bottom:0,left:0,right:0,zIndex:10}}ngOnInit(){this.subscriptions.push(this.edgesService.parentEdges.subscribe(t=>{this.edges=t}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}nextEdges(){setTimeout(()=>this.edgesService.nextEdges(this.edges))}get edges(){return Object.assign({},this._edges,{top:this._edges.top+this.elementRef.nativeElement.clientHeight,zIndex:this._edges.zIndex-1})}set edges(t){this._edges=t,this.sZIndex=t.zIndex,this.renderer.setStyle(this.elementRef.nativeElement,"top",`${t.top}px`),this.nextEdges()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(ue))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","appPositionSticky",""]],hostVars:4,hostBindings:function(i,s){2&i&&(e.xc7("z-index",s.sZIndex),e.AVh("position-sticky",s.cPositionSticky))},inputs:{edges:"edges"}})}return n})();var re=z(1090),O=z(4207);const S=function(){return{exact:!0}};function L(n,o){if(1&n&&(e.j41(0,"th",2)(1,"a",3),e.EFF(2),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG().$implicit;e.xc7("width",1/i,"%"),e.Y8G("routerLink",t.link)("routerLinkActiveOptions",e.lJ4(6,S)),e.R7$(1),e.Y8G("routerLink",t.link),e.R7$(1),e.SpI(" ",t.title," ")}}function w(n,o){if(1&n&&(e.j41(0,"th",11)(1,"a",12),e.EFF(2),e.nI1(3,"translateComp"),e.k0s()()),2&n){const t=e.XpG().$implicit,i=e.XpG();e.xc7("width",1/t,"%"),e.R7$(2),e.SpI(" ",e.i5U(3,3,i.msgs.FusionSettings,i.lang)," ")}}const N=function(){return{marginLeft:"auto",marginRight:"auto",width:"1080px"}};function $(n,o){if(1&n&&(e.j41(0,"table",1)(1,"thead")(2,"tr")(3,"th",2)(4,"a",3),e.EFF(5),e.nI1(6,"translateComp"),e.k0s()(),e.j41(7,"th",4)(8,"a",5),e.EFF(9),e.nI1(10,"translateComp"),e.k0s()(),e.j41(11,"th",6)(12,"a",7),e.EFF(13),e.nI1(14,"translateComp"),e.k0s()(),e.DNE(15,L,3,7,"th",8),e.DNE(16,w,4,6,"th",9),e.k0s(),e.j41(17,"tr")(18,"th",10),e.EFF(19),e.nI1(20,"translateComp"),e.k0s()()()()),2&n){const t=o.$implicit,i=e.XpG();e.Y8G("ngStyle",e.lJ4(30,N)),e.R7$(3),e.xc7("width",1/t,"%"),e.Y8G("routerLink",i.mainList+"s")("routerLinkActiveOptions",e.lJ4(31,S)),e.R7$(1),e.Y8G("routerLink",i.mainList+"s"),e.R7$(1),e.SpI(" ",e.i5U(6,18,"demon"===i.mainList?i.msgs.DemonList:i.msgs.PersonaList,i.lang)," "),e.R7$(2),e.xc7("width",1/t,"%"),e.R7$(2),e.SpI(" ",e.i5U(10,21,i.msgs.SkillList,i.lang)," "),e.R7$(2),e.xc7("width",1/t,"%"),e.R7$(2),e.SpI(" ",e.i5U(14,24,i.msgs.FusionChart,i.lang)," "),e.R7$(2),e.Y8G("ngForOf",i.otherLinks),e.R7$(1),e.Y8G("ngIf",i.hasSettings),e.R7$(2),e.BMQ("colspan",t),e.R7$(1),e.Lme("",i.appName,"",e.i5U(20,27,i.msgs.FusionCalculator,i.lang),"")}}function T(n,o){if(1&n&&(e.j41(0,"div",3),e.nrm(1,"app-demon-compendium-header",4),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("appName",t.appName)("mainList",t.mainList)("hasSettings",t.hasSettings)("lang",t.lang)("otherLinks",t.otherLinks)}}function W(n,o){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-demon-compendium-header",4),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("appName",t.appName)("mainList",t.mainList)("hasSettings",t.hasSettings)("lang",t.lang)("otherLinks",t.otherLinks)}}const ee=function(n){return{marginLeft:"auto",marginRight:"auto",width:n}};let pe=(()=>{class n{constructor(){this.appName="Shin Megami Tensei",this.mainList="demon",this.hasSettings=!0,this.lang="en",this.otherLinks=[],this.msgs=re.fu}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-compendium-header"]],inputs:{appName:"appName",mainList:"mainList",hasSettings:"hasSettings",lang:"lang",otherLinks:"otherLinks"},decls:1,vars:1,consts:[[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],["routerLink","skills","routerLinkActive","active",1,"nav"],["routerLink","skills"],["routerLink","chart","routerLinkActive","active",1,"nav"],["routerLink","chart"],["class","nav","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions","width",4,"ngFor","ngForOf"],["class","nav","routerLink","settings","routerLinkActive","active",3,"width",4,"ngIf"],[1,"title"],["routerLink","settings","routerLinkActive","active",1,"nav"],["routerLink","settings"]],template:function(i,s){1&i&&e.DNE(0,$,21,32,"table",0),2&i&&e.Y8G("ngIf",3+s.otherLinks.length+(s.hasSettings?1:0))},dependencies:[b.Sq,b.bT,b.B3,Z.Wk,Z.wQ,O.uz],encapsulation:2,changeDetection:0})}return n})(),fe=(()=>{class n{constructor(t){this.route=t,this.subscriptions=[],this.mainList="demon",this.hasSettings=!0,this.otherLinks=[]}ngOnInit(){this.subscriptions.push(this.route.data.subscribe(t=>{this.appName=t.appName||"Shin Megami Tensei",this.isChart="chart"===t.fusionTool,this.lang=t.lang})),setTimeout(()=>this.stickyTable.nextEdges())}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Z.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-compendium"]],viewQuery:function(i,s){if(1&i&&e.GBs(oe,5),2&i){let r;e.mGM(r=e.lsd())&&(s.stickyTable=r.first)}},inputs:{mainList:"mainList",hasSettings:"hasSettings",otherLinks:"otherLinks"},features:[e.Jv_([ue])],decls:4,vars:5,consts:[[3,"ngStyle"],["appPositionSticky","",4,"ngIf"],[4,"ngIf"],["appPositionSticky",""],["appPositionSticky","",3,"appName","mainList","hasSettings","lang","otherLinks"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.DNE(1,T,2,5,"div",1),e.DNE(2,W,2,5,"div",2),e.nrm(3,"router-outlet"),e.k0s()),2&i&&(e.Y8G("ngStyle",e.eq3(3,ee,s.isChart?"auto":"1080px")),e.R7$(1),e.Y8G("ngIf",!s.isChart),e.R7$(1),e.Y8G("ngIf",s.isChart))},dependencies:[b.bT,b.B3,Z.n3,oe,pe],encapsulation:2,changeDetection:0})}return n})(),X=(()=>{class n{constructor(t){this.appCssClasses=t.compConfig.appCssClasses,this.otherLinks=[{title:"Shadow List",link:"shadows"}],t.compConfig.hasManualInheritance&&this.otherLinks.push({title:"Recipe Generator",link:"recipes"})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ve.i))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-p4-compendium"]],decls:1,vars:4,consts:[[3,"ngClass","hasSettings","mainList","otherLinks"]],template:function(i,s){1&i&&e.nrm(0,"app-demon-compendium",0),2&i&&e.Y8G("ngClass",s.appCssClasses)("hasSettings",!1)("mainList","persona")("otherLinks",s.otherLinks)},dependencies:[b.YU,fe],styles:[".p3 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p3 div.element-icon.i28716,.p3 div.element-icon.sla{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/sword.png)}.p3 div.element-icon.i28717,.p3 div.element-icon.str{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/phys.png)}.p3 div.element-icon.i28718,.p3 div.element-icon.pie{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/gun.png)}.p3 div.element-icon.i30972,.p3 div.element-icon.fir{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/fire.png)}.p3 div.element-icon.i29948,.p3 div.element-icon.ice{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/ice.png)}.p3 div.element-icon.i29436,.p3 div.element-icon.ele{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/elec.png)}.p3 div.element-icon.i29180,.p3 div.element-icon.win{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/wind.png)}.p3 div.element-icon.i4012,.p3 div.element-icon.lig{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/bless.png)}.p3 div.element-icon.i32624,.p3 div.element-icon.dar{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/curse.png)}.p3 div.element-icon.i3956,.p3 div.element-icon.ail{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/ailment.png)}.p3 div.element-icon.i4093,.p3 div.element-icon.rec{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/healing.png)}.p3 div.element-icon.i32764,.p3 div.element-icon.alm{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/almighty.png)}.p3 div.element-icon.i4092,.p3 div.element-icon.spa,.p3 div.element-icon.spb,.p3 div.element-icon.spe{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/trait.png)}.p3 div.element-icon.sup{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/support.png)}.p3 div.element-icon.pas{background-image:url(https://yukiyoneko.github.io/megaten-fusion-tool/assets/images/p5/passive.png)}.p3 th.title,.p3 th.nav.active,.p3 th.nav.active a{color:#000;background-color:#4372aa}.p4 div.element-icon{height:25px;background-size:25px;background-repeat:no-repeat;background-position:center;color:transparent}.p4 div.element-icon.i2166,.p4 div.element-icon.phy{background-image:url(/assets/images/p5/phys.png)}.p4 div.element-icon.i3582,.p4 div.element-icon.fir{background-image:url(/assets/images/p5/fire.png)}.p4 div.element-icon.i3070,.p4 div.element-icon.ice{background-image:url(/assets/images/p5/ice.png)}.p4 div.element-icon.i3966,.p4 div.element-icon.ele{background-image:url(/assets/images/p5/elec.png)}.p4 div.element-icon.i3838,.p4 div.element-icon.win{background-image:url(/assets/images/p5/wind.png)}.p4 div.element-icon.i2006,.p4 div.element-icon.lig{background-image:url(/assets/images/p5/bless.png)}.p4 div.element-icon.i1978,.p4 div.element-icon.dar{background-image:url(/assets/images/p5/curse.png)}.p4 div.element-icon.i1979,.p4 div.element-icon.ail{background-image:url(/assets/images/p5/ailment.png)}.p4 div.element-icon.i2014,.p4 div.element-icon.rec{background-image:url(/assets/images/p5/healing.png)}.p4 div.element-icon.i4094,.p4 div.element-icon.alm{background-image:url(/assets/images/p5/almighty.png)}.p4 div.element-icon.spa{background-image:url(/assets/images/p5/trait.png)}.p4 div.element-icon.i4095,.p4 div.element-icon.sup{background-image:url(/assets/images/p5/support.png)}.p4 div.element-icon.pas{background-image:url(/assets/images/p5/passive.png)}.p4 th.title,.p4 th.nav.active,.p4 th.nav.active a{color:#000;background-color:#ffe600}\n"],encapsulation:2,changeDetection:0})}return n})();var q=z(1985);let R=(()=>{class n{constructor(t,i,s){this.title2=t,this.changeDetectorRef=i,this.fusionDataService2=s,this.subscriptions=[],this.appName="List of Demons - Megami Tensei Fusion Tools",this.initListLen=50,this.showAllies=!0,this.showEnemies=!1,this.defaultSortFun=(r,p)=>r.name.localeCompare(p.name)}ngOnInit(){this.title2.setTitle(this.appName),this.subscriptions.push(this.fusionDataService2.compendium.subscribe(this.onCompendiumUpdated.bind(this)))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}onCompendiumUpdated(t){this.changeDetectorRef.markForCheck(),this.demons=q.c.create(i=>{let s=t.allDemons;this.showAllies||(s=s.filter(r=>r.isEnemy)),this.showEnemies||(s=s.filter(r=>!r.isEnemy)),s.sort(this.defaultSortFun),i.next(s.slice(0,this.initListLen)),setTimeout(()=>i.next(s))})}static#e=this.\u0275fac=function(i){e.QTQ()};static#t=this.\u0275dir=e.FsC({type:n})}return n})();var Q=z(345);let de=(()=>{class n{constructor(t,i){this.elementRef=t,this.renderer=i,this.borderWidth=2}get colWidths(){const t=[],i=this.elementRef.nativeElement.children;if(i.length)for(const s of i[i.length-1].children)t.push(s.getBoundingClientRect().width-2*this.borderWidth);return t}set colWidths(t){const i=this.elementRef.nativeElement.children;if(i.length){const s=i[i.length-1].children;for(let r=0;r<s.length;r++)this.renderer.setStyle(s[r],"width",`${t[r]}px`)}}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(e.sFG))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","appColumnWidths",""]],inputs:{borderWidth:"borderWidth",colWidths:"colWidths"}})}return n})();const Oe=["stickyHeader"],pt=["hiddenHeader"];let $e=(()=>{class n{constructor(){this.sortAsc=!0,this.sortAscIndex=1,this.sortFunIndexChanged=new e.bkB}get sortFunIndex(){return(this.sortAsc?1:-1)*this.sortAscIndex}set sortFunIndex(t){this.sortAsc=t>0,this.sortAscIndex=(this.sortAsc?1:-1)*t}sortDirClass(t){return this.sortAscIndex!==t?"none":this.sortAsc?"asc":"desc"}nextSortFunIndex(t){this.sortAsc=this.sortAscIndex!==t||!this.sortAsc,this.sortAscIndex=t,this.sortFunIndexChanged.emit(this.sortFunIndex)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=e.FsC({type:n,inputs:{sortFunIndex:"sortFunIndex"},outputs:{sortFunIndexChanged:"sortFunIndexChanged"}})}return n})(),ye=(()=>{class n{constructor(){this._rowData=[],this._sortFunIndex=0}get rowData(){return this._rowData}set rowData(t){this._rowData=t,this.sort()}get sortFunIndex(){return this._sortFunIndex}set sortFunIndex(t){this._sortFunIndex=t,this.sort()}sort(){this.sortFunIndex>=0?this.rowData.sort(this.getSortFun(this.sortFunIndex)):this.sortFunIndex<0&&this.rowData.sort((t,i)=>this.getSortFun(-1*this.sortFunIndex)(i,t)),setTimeout(this.matchColWidths.bind(this))}matchColWidths(){this.stickyHeader&&this.hiddenHeader&&(this.stickyHeader.colWidths=this.hiddenHeader.colWidths)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=e.FsC({type:n,viewQuery:function(i,s){if(1&i&&(e.GBs(oe,5),e.GBs(Oe,5,de),e.GBs(pt,5,de)),2&i){let r;e.mGM(r=e.lsd())&&(s.stickyTable=r.first),e.mGM(r=e.lsd())&&(s.stickyHeader=r.first),e.mGM(r=e.lsd())&&(s.hiddenHeader=r.first)}},inputs:{rowData:"rowData",sortFunIndex:"sortFunIndex"}})}return n})(),ze=(()=>{class n extends ye{constructor(){super(...arguments),this.sortFuns=[]}ngOnInit(){this.nextSortFuns()}ngAfterViewChecked(){this.matchColWidths()}nextSortFuns(){this.sortFuns=[],this.raceOrder&&this.sortFuns.push((t,i)=>200*(this.raceOrder[t.race]-this.raceOrder[i.race])+i.lvl-t.lvl,(t,i)=>200*(this.raceOrder[t.race]-this.raceOrder[i.race])+i.lvl-t.lvl,(t,i)=>i.lvl-t.lvl,(t,i)=>t.name.localeCompare(i.name)),this.inheritOrder&&this.sortFuns.push((t,i)=>t.inherits-i.inherits),this.statHeaders&&(this.sortFuns=this.sortFuns.concat(this.statHeaders.map((t,i)=>(s,r)=>r.stats[i]-s.stats[i]))),this.resistHeaders&&(this.sortFuns=this.sortFuns.concat(this.resistHeaders.map((t,i)=>(s,r)=>s.resists[i]-r.resists[i]))),this.affinityHeaders&&(this.sortFuns=this.sortFuns.concat(this.affinityHeaders.map((t,i)=>(s,r)=>r.affinities[i]-s.affinities[i])))}getSortFun(t){return this.sortFuns[t]}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275dir=e.FsC({type:n,inputs:{raceOrder:"raceOrder",inheritOrder:"inheritOrder",statHeaders:"statHeaders",resistHeaders:"resistHeaders",affinityHeaders:"affinityHeaders"},features:[e.Vt3]})}return n})();var ge=z(4341);const ut=["class","app-demon-list-header"];function Ze(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.BMQ("colSpan",t.statColIndices.length),e.R7$(1),e.JRh(e.i5U(2,2,t.msgs.Stats,t.lang))}}function et(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.BMQ("colSpan",t.resistColIndices.length),e.R7$(1),e.JRh(e.i5U(2,2,t.msgs.Resistances,t.lang))}}function tt(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.BMQ("colSpan",t.affinityColIndices.length),e.R7$(1),e.JRh(e.i5U(2,2,t.msgs.Affinities,t.lang))}}function ft(n,o){1&n&&(e.j41(0,"th",5),e.EFF(1,"Enemy"),e.k0s())}function dt(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.nextSortFunIndex(4))}),e.EFF(1,"Inherits"),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("ngClass",t.sortDirClass(4))}}function gt(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",6),e.bIt("click",function(){const r=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.nextSortFunIndex(r.index))}),e.EFF(1),e.k0s()}if(2&n){const t=o.$implicit;e.R7$(1),e.SpI(" ",t.stat," ")}}function _t(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",6),e.bIt("click",function(){const r=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.nextSortFunIndex(r.index))}),e.nrm(1,"div"),e.k0s()}if(2&n){const t=o.$implicit;e.R7$(1),e.ZvI("element-icon ",t.elem,"")}}function nt(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",6),e.bIt("click",function(){const r=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.nextSortFunIndex(r.index))}),e.nrm(1,"div"),e.k0s()}if(2&n){const t=o.$implicit;e.R7$(1),e.ZvI("element-icon ",t.elem,"")}}function st(n,o){1&n&&(e.j41(0,"th"),e.EFF(1,"Drops"),e.k0s())}function it(n,o){1&n&&(e.j41(0,"th"),e.EFF(1,"Appears"),e.k0s())}let ot=(()=>{class n extends $e{constructor(){super(...arguments),this.isEnemy=!1,this.isPersona=!1,this.hasInherits=!1,this.lang="en",this.statHeaders=[],this.resistHeaders=[],this.affinityHeaders=[],this.statColIndices=[],this.resistColIndices=[],this.reslvlColIndices=[],this.affinityColIndices=[],this.msgs=re.vC}ngOnInit(){this.nextColIndices()}nextColIndices(){let t=this.hasInherits?5:4;this.statHeaders&&(this.statColIndices=this.statHeaders.map((i,s)=>({stat:i,index:s+t})),t+=this.statHeaders.length),this.resistHeaders&&(this.resistColIndices=this.resistHeaders.map((i,s)=>({elem:i,index:s+t})),t+=this.resistHeaders.length),this.affinityHeaders&&(this.affinityColIndices=this.affinityHeaders.map((i,s)=>({elem:i,index:s+t})))}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tfoot",8,"app-demon-list-header"]],inputs:{isEnemy:"isEnemy",isPersona:"isPersona",hasInherits:"hasInherits",lang:"lang",statHeaders:"statHeaders",resistHeaders:"resistHeaders",affinityHeaders:"affinityHeaders"},features:[e.Vt3],attrs:ut,decls:26,vars:26,consts:[[4,"ngIf"],["colspan","2",4,"ngIf"],[1,"sortable",3,"ngClass","click"],["class","sortable",3,"ngClass","click",4,"ngIf"],["class","sortable",3,"click",4,"ngFor","ngForOf"],["colspan","2"],[1,"sortable",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.nI1(3,"translateComp"),e.k0s(),e.DNE(4,Ze,3,5,"th",0),e.DNE(5,et,3,5,"th",0),e.DNE(6,tt,3,5,"th",0),e.DNE(7,ft,2,0,"th",1),e.k0s(),e.j41(8,"tr")(9,"th",2),e.bIt("click",function(){return s.nextSortFunIndex(1)}),e.j41(10,"span"),e.EFF(11),e.nI1(12,"translateComp"),e.k0s()(),e.j41(13,"th",2),e.bIt("click",function(){return s.nextSortFunIndex(2)}),e.j41(14,"span"),e.EFF(15,"Lvl"),e.k0s()(),e.j41(16,"th",2),e.bIt("click",function(){return s.nextSortFunIndex(3)}),e.j41(17,"span"),e.EFF(18),e.nI1(19,"translateComp"),e.k0s()(),e.DNE(20,dt,2,1,"th",3),e.DNE(21,gt,2,1,"th",4),e.DNE(22,_t,2,3,"th",4),e.DNE(23,nt,2,3,"th",4),e.DNE(24,st,2,0,"th",0),e.DNE(25,it,2,0,"th",0),e.k0s()),2&i&&(e.R7$(1),e.BMQ("colSpan",s.hasInherits?4:3),e.R7$(1),e.JRh(e.i5U(3,17,s.isPersona?s.msgs.Persona:s.msgs.Demon,s.lang)),e.R7$(2),e.Y8G("ngIf",s.statColIndices.length),e.R7$(1),e.Y8G("ngIf",s.resistColIndices.length),e.R7$(1),e.Y8G("ngIf",s.affinityColIndices.length),e.R7$(1),e.Y8G("ngIf",s.isEnemy),e.R7$(2),e.Y8G("ngClass",s.sortDirClass(1)),e.R7$(2),e.JRh(e.i5U(12,20,s.msgs.Race,s.lang)),e.R7$(2),e.Y8G("ngClass",s.sortDirClass(2)),e.R7$(3),e.Y8G("ngClass",s.sortDirClass(3)),e.R7$(2),e.JRh(e.i5U(19,23,s.msgs.Name,s.lang)),e.R7$(2),e.Y8G("ngIf",s.hasInherits),e.R7$(1),e.Y8G("ngForOf",s.statColIndices),e.R7$(1),e.Y8G("ngForOf",s.resistColIndices),e.R7$(1),e.Y8G("ngForOf",s.affinityColIndices),e.R7$(1),e.Y8G("ngIf",s.isEnemy),e.R7$(1),e.Y8G("ngIf",s.isEnemy))},dependencies:[b.YU,b.Sq,b.bT,O.uz],styles:["th[_ngcontent-%COMP%]{white-space:nowrap}span[_ngcontent-%COMP%]{padding-right:.6em}"],changeDetection:0})}return n})();const rt=["class","app-smt-demon-list-row"];function kt(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"lvlToNumber"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,t.data.lvl))}}function Ft(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.updateCurrRange())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(1),e.SpI("",t.data.currLvl," \u270e")}}function _(n,o){if(1&n&&(e.j41(0,"option",11),e.EFF(1),e.k0s()),2&n){const t=o.index,i=e.XpG(3);e.Y8G("value",t+i.currOffset),e.R7$(1),e.JRh(t+i.currOffset)}}function a(n,o){if(1&n){const t=e.RV6();e.j41(0,"select",10),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2);return e.Njj(r.emitValidLvl(s))}),e.j41(1,"option",11),e.EFF(2),e.k0s(),e.DNE(3,_,2,2,"option",12),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("value",t.data.currLvl),e.R7$(1),e.JRh(t.data.currLvl),e.R7$(1),e.Y8G("ngForOf",t.currRange)}}function d(n,o){if(1&n&&(e.j41(0,"td",6),e.DNE(1,Ft,2,1,"button",7),e.DNE(2,a,4,3,"select",8),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",!t.currOffset),e.R7$(1),e.Y8G("ngIf",t.currOffset)}}const m=function(n){return["element-icon",n]};function f(n,o){if(1&n&&(e.j41(0,"td")(1,"div",0),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngClass",e.eq3(2,m,"i"+t.data.inherits)),e.R7$(1),e.JRh(t.data.inherits)}}function c(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}const h=function(n){return["resists",n]};function u(n,o){if(1&n&&(e.j41(0,"td",0),e.nI1(1,"reslvlToColor"),e.EFF(2),e.nI1(3,"reslvlToStringJa"),e.k0s()),2&n){const t=o.$implicit,i=e.XpG();e.Y8G("ngClass",e.eq3(7,h,e.bMT(1,2,t))),e.R7$(2),e.SpI(" ",e.i5U(3,4,t,i.lang)," ")}}function l(n,o){if(1&n&&(e.j41(0,"td",0),e.EFF(1),e.nI1(2,"affinityToString"),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngClass","affinity"+t),e.R7$(1),e.SpI(" ",e.bMT(2,2,t)," ")}}function k(n,o){if(1&n&&(e.qex(0),e.DNE(1,l,3,4,"td",5),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.data.affinities)}}function g(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.data.drop)}}function C(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.data.area)}}const D=function(n){return["align",n]},I=function(n,o){return{special:n,exception:o}};function y(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr",7),e.bIt("currLvl",function(s){const p=e.eBV(t).$implicit,F=e.XpG();return e.Njj(F.lvlChanged.emit({demon:p.name,currLvl:s}))}),e.k0s()}if(2&n){const t=o.$implicit,i=e.XpG();e.Y8G("isEnemy",i.isEnemy)("hasCurrLvl",i.hasCurrLvl)("hasInherits",!!i.inheritOrder)("hasAffinity",!!i.affinityHeaders)("lang",i.lang)("ngClass",e.l_i(7,I,"special"===t.fusion,"special"!==t.fusion&&"normal"!==t.fusion))("data",t)}}let E=(()=>{class n{constructor(){this.isEnemy=!1,this.hasCurrLvl=!1,this.hasInherits=!1,this.hasAffinity=!1,this.lang="en",this.currLvl=new e.bkB,this.currOffset=0,this.currRange=Array(0)}updateCurrRange(){0===this.currOffset&&(this.currOffset=Math.floor(this.data.lvl),this.currRange=Array(100-this.currOffset))}emitValidLvl(t){const i=parseInt(t.target.value,10);this.data.currLvl!==i&&0<i&&i<100&&Number.isInteger(i)&&(this.data.currLvl=i,this.currLvl.emit(i))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tr",8,"app-smt-demon-list-row"]],inputs:{isEnemy:"isEnemy",hasCurrLvl:"hasCurrLvl",hasInherits:"hasInherits",hasAffinity:"hasAffinity",lang:"lang",data:"data"},outputs:{currLvl:"currLvl"},attrs:rt,decls:13,vars:14,consts:[[3,"ngClass"],[4,"ngIf"],["style","text-align: center;",4,"ngIf"],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[2,"text-align","center"],[3,"click",4,"ngIf"],[3,"change",4,"ngIf"],[3,"click"],[3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(i,s){1&i&&(e.j41(0,"td",0),e.EFF(1),e.k0s(),e.DNE(2,kt,3,3,"td",1),e.DNE(3,d,3,2,"td",2),e.j41(4,"td")(5,"a",3),e.EFF(6),e.k0s()(),e.DNE(7,f,3,4,"td",1),e.DNE(8,c,2,1,"td",4),e.DNE(9,u,4,9,"td",5),e.DNE(10,k,2,1,"ng-container",1),e.DNE(11,g,2,1,"td",1),e.DNE(12,C,2,1,"td",1)),2&i&&(e.Y8G("ngClass",e.eq3(12,D,s.data.align?s.data.align:"none")),e.R7$(1),e.JRh(s.data.race),e.R7$(1),e.Y8G("ngIf",!s.hasCurrLvl),e.R7$(1),e.Y8G("ngIf",s.hasCurrLvl),e.R7$(2),e.Y8G("routerLink",s.data.name),e.R7$(1),e.JRh(s.data.name),e.R7$(1),e.Y8G("ngIf",s.hasInherits),e.R7$(1),e.Y8G("ngForOf",s.data.stats),e.R7$(1),e.Y8G("ngForOf",s.data.resists),e.R7$(1),e.Y8G("ngIf",s.hasAffinity),e.R7$(1),e.Y8G("ngIf",s.isEnemy),e.R7$(1),e.Y8G("ngIf",s.isEnemy))},dependencies:[b.YU,b.Sq,b.bT,Z.Wk,ge.xH,ge.y7,O.XM,O.Z2,O.g7,O.Fz],encapsulation:2,changeDetection:0})}return n})(),v=(()=>{class n extends ze{constructor(){super(...arguments),this.isPersona=!1,this.isEnemy=!1,this.hasCurrLvl=!1,this.lang="en",this.lvlChanged=new e.bkB}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-smt-demon-list"]],inputs:{isPersona:"isPersona",isEnemy:"isEnemy",hasCurrLvl:"hasCurrLvl",lang:"lang"},outputs:{lvlChanged:"lvlChanged"},features:[e.Jv_([ue]),e.Vt3],decls:8,vars:18,consts:[["appPositionSticky","",1,"list-table"],["appColumnWidths","",1,"app-demon-list-header","sticky-header",3,"isPersona","isEnemy","lang","hasInherits","statHeaders","resistHeaders","affinityHeaders","sortFunIndex","sortFunIndexChanged"],["stickyHeader",""],[1,"list-table"],["appColumnWidths","",1,"app-demon-list-header",3,"isPersona","isEnemy","lang","hasInherits","statHeaders","resistHeaders","affinityHeaders"],["hiddenHeader",""],["class","app-smt-demon-list-row",3,"isEnemy","hasCurrLvl","hasInherits","hasAffinity","lang","ngClass","data","currLvl",4,"ngFor","ngForOf"],[1,"app-smt-demon-list-row",3,"isEnemy","hasCurrLvl","hasInherits","hasAffinity","lang","ngClass","data","currLvl"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"tfoot",1,2),e.bIt("sortFunIndexChanged",function(p){return s.sortFunIndex=p}),e.k0s()(),e.j41(3,"table",3),e.nrm(4,"tfoot",4,5),e.j41(6,"tbody"),e.DNE(7,y,1,10,"tr",6),e.k0s()()),2&i&&(e.R7$(1),e.Y8G("isPersona",s.isPersona)("isEnemy",s.isEnemy)("lang",s.lang)("hasInherits",!!s.inheritOrder)("statHeaders",s.statHeaders)("resistHeaders",s.resistHeaders)("affinityHeaders",s.affinityHeaders)("sortFunIndex",s.sortFunIndex),e.R7$(3),e.xc7("visibility","collapse"),e.Y8G("isPersona",s.isPersona)("isEnemy",s.isEnemy)("lang",s.lang)("hasInherits",!!s.inheritOrder)("statHeaders",s.statHeaders)("resistHeaders",s.resistHeaders)("affinityHeaders",s.affinityHeaders),e.R7$(3),e.Y8G("ngForOf",s.rowData))},dependencies:[b.YU,b.Sq,oe,de,ot,E],encapsulation:2,changeDetection:0})}return n})(),G=(()=>{class n extends R{constructor(t,i,s,r){super(t,s,r),this.showAllies=!i.snapshot.data.showShadows,this.showEnemies=!this.showAllies,this.compConfig=r.compConfig,this.defaultSortFun=(p,F)=>200*(this.compConfig.raceOrder[p.race]-this.compConfig.raceOrder[F.race])+F.lvl-p.lvl,this.appName=`List of Personas - ${r.appName}`,this.statHeaders=this.compConfig.baseStats,this.resistHeaders=this.compConfig.resistElems,this.inheritOrder=this.compConfig.elemOrder,this.showEnemies&&(this.appName=`List of Shadows - ${r.appName}`,this.statHeaders=this.compConfig.enemyStats,this.resistHeaders=this.compConfig.enemyResists,this.inheritOrder=null)}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Q.hE),e.rXU(Z.nX),e.rXU(e.gRc),e.rXU(ve.i))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-list-container"]],features:[e.Vt3],decls:2,vars:9,consts:[[3,"isEnemy","hasCurrLvl","raceOrder","statHeaders","resistHeaders","inheritOrder","rowData"]],template:function(i,s){1&i&&(e.nrm(0,"app-smt-demon-list",0),e.nI1(1,"async")),2&i&&e.Y8G("isEnemy",s.showEnemies)("hasCurrLvl",!s.showEnemies)("raceOrder",s.compConfig.raceOrder)("statHeaders",s.statHeaders)("resistHeaders",s.resistHeaders)("inheritOrder",s.inheritOrder)("rowData",e.bMT(1,7,s.demons))},dependencies:[v,b.Jj],encapsulation:2,changeDetection:0})}return n})(),H=(()=>{class n{constructor(t,i,s){this.title2=t,this.changeDetectorRef2=i,this.fusionDataService2=s,this.subscriptions=[],this.initListLen=50,this.appName="List of Skills - Test App",this.defaultSortFun=(r,p)=>r.name.localeCompare(p.name)}ngOnInit(){this.title2.setTitle(this.appName),this.subscriptions.push(this.fusionDataService2.compendium.subscribe(this.onCompendiumUpdated.bind(this)))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}onCompendiumUpdated(t){this.changeDetectorRef2.markForCheck(),this.skills=q.c.create(i=>{const s=t.allSkills;s.sort(this.defaultSortFun),i.next(s.slice(0,this.initListLen)),setTimeout(()=>i.next(s))})}static#e=this.\u0275fac=function(i){e.QTQ()};static#t=this.\u0275dir=e.FsC({type:n})}return n})(),V=(()=>{class n extends ye{constructor(){super(...arguments),this.sortFuns=[]}ngOnInit(){this.nextSortFuns()}ngAfterViewChecked(){this.matchColWidths()}nextSortFuns(){this.sortFuns=[(t,i)=>1e4*(this.elemOrder[t.element]-this.elemOrder[i.element])+t.rank-i.rank,(t,i)=>1e4*(this.elemOrder[t.element]-this.elemOrder[i.element])+t.rank-i.rank,(t,i)=>t.name.localeCompare(i.name),(t,i)=>i.cost-t.cost,(t,i)=>t.rank-i.rank],this.inheritOrder&&this.sortFuns.push((t,i)=>this.inheritOrder[t.inherit]-this.inheritOrder[i.inherit])}getSortFun(t){return this.sortFuns[t]}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275dir=e.FsC({type:n,inputs:{elemOrder:"elemOrder",inheritOrder:"inheritOrder"},features:[e.Vt3]})}return n})();const ne=["class","app-skill-list-header"];function _e(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.Target,t.lang))}}function ae(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",0),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.nextSortFunIndex(4))}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"translateComp"),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("ngClass",t.sortDirClass(4)),e.R7$(2),e.JRh(e.i5U(3,2,t.msgs.Rank,t.lang))}}function ie(n,o){if(1&n){const t=e.RV6();e.j41(0,"th",0),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.nextSortFunIndex(5))}),e.j41(1,"span"),e.EFF(2,"Inherit"),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("ngClass",t.sortDirClass(5))}}function Re(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.transferTitle)}}let he=(()=>{class n extends $e{constructor(){super(...arguments),this.hasInherit=!1,this.hasTarget=!0,this.hasRank=!0,this.lang="en",this.transferTitle="",this.skillHeaderLen=4,this.acquireHeaderLen=1,this.msgs=re.vf}ngOnInit(){this.nextColIndices()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1),this.transferTitle&&(this.acquireHeaderLen+=1)}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tfoot",8,"app-skill-list-header"]],inputs:{hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",lang:"lang",transferTitle:"transferTitle"},features:[e.Vt3],attrs:ne,decls:30,vars:37,consts:[[1,"sortable",3,"ngClass","click"],[1,"cost"],[4,"ngIf"],["class","sortable",3,"ngClass","click",4,"ngIf"]],template:function(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.nI1(3,"translateComp"),e.k0s(),e.j41(4,"th"),e.EFF(5),e.nI1(6,"translateComp"),e.k0s()(),e.j41(7,"tr")(8,"th",0),e.bIt("click",function(){return s.nextSortFunIndex(1)}),e.j41(9,"span"),e.EFF(10),e.nI1(11,"translateComp"),e.k0s()(),e.j41(12,"th",0),e.bIt("click",function(){return s.nextSortFunIndex(2)}),e.j41(13,"span"),e.EFF(14),e.nI1(15,"translateComp"),e.k0s()(),e.j41(16,"th",0),e.bIt("click",function(){return s.nextSortFunIndex(3)}),e.j41(17,"span",1),e.EFF(18),e.nI1(19,"translateComp"),e.k0s()(),e.j41(20,"th"),e.EFF(21),e.nI1(22,"translateComp"),e.k0s(),e.DNE(23,_e,3,4,"th",2),e.DNE(24,ae,4,5,"th",3),e.DNE(25,ie,3,1,"th",3),e.j41(26,"th"),e.EFF(27),e.nI1(28,"translateComp"),e.k0s(),e.DNE(29,Re,2,1,"th",2),e.k0s()),2&i&&(e.R7$(1),e.BMQ("colSpan",s.skillHeaderLen),e.R7$(1),e.JRh(e.i5U(3,16,s.msgs.Skill,s.lang)),e.R7$(2),e.BMQ("colSpan",s.acquireHeaderLen),e.R7$(1),e.JRh(e.i5U(6,19,s.msgs.HowToAcquire,s.lang)),e.R7$(3),e.Y8G("ngClass",s.sortDirClass(1)),e.R7$(2),e.JRh(e.i5U(11,22,s.msgs.Elem,s.lang)),e.R7$(2),e.Y8G("ngClass",s.sortDirClass(2)),e.R7$(2),e.JRh(e.i5U(15,25,s.msgs.Name,s.lang)),e.R7$(2),e.Y8G("ngClass",s.sortDirClass(3)),e.R7$(2),e.JRh(e.i5U(19,28,s.msgs.Cost,s.lang)),e.R7$(3),e.JRh(e.i5U(22,31,s.msgs.Effect,s.lang)),e.R7$(2),e.Y8G("ngIf",s.hasTarget),e.R7$(1),e.Y8G("ngIf",s.hasRank),e.R7$(1),e.Y8G("ngIf",s.hasInherit),e.R7$(2),e.JRh(e.i5U(28,34,s.msgs.LearnedBy,s.lang)),e.R7$(2),e.Y8G("ngIf",s.transferTitle))},dependencies:[b.YU,b.bT,O.uz],styles:["th[_ngcontent-%COMP%]{white-space:nowrap}span[_ngcontent-%COMP%]{padding:.6em}span.cost[_ngcontent-%COMP%]{padding:1.2em}"],changeDetection:0})}return n})();const De=["class","app-smt-skill-list-row"];function Ae(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.LHq(" ",t.data.damage," ",t.data.element," damage",t.data.hits?" x"+t.data.hits:"","",t.data.effect?", "+t.data.effect:""," ")}}function at(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.data.effect)}}function lt(n,o){if(1&n&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.ZvI("target-icon a",t.data.target||"Self",""),e.R7$(1),e.JRh(t.data.target||"Self")}}function Ge(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.xc7("color",99!==t.data.rank?null:"transparent"),e.R7$(1),e.JRh(t.data.rank)}}function je(n,o){if(1&n&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.ZvI("element-icon ",t.data.inherit.toLowerCase(),""),e.R7$(1),e.JRh(t.data.inherit)}}function Te(n,o){if(1&n&&(e.j41(0,"td",3),e.EFF(1),e.nI1(2,"skillLevelToString"),e.k0s()),2&n){const t=e.XpG();e.Y8G("ngClass","lvl"+t.data.level.toString()),e.R7$(1),e.JRh(e.bMT(2,2,t.data.level))}}function Be(n,o){if(1&n&&(e.j41(0,"li")(1,"a",6),e.EFF(2),e.k0s(),e.EFF(3),e.nI1(4,"skillLevelToShortString"),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(2);e.R7$(1),e.FCK("routerLink","../",i.isPersona?"personas":"demons","/",t.demon,""),e.R7$(1),e.JRh(t.demon),e.R7$(1),e.SpI(" ",e.bMT(4,4,t.level)," ")}}function yt(n,o){if(1&n&&(e.j41(0,"td")(1,"ul",4),e.DNE(2,Be,5,6,"li",5),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.data.learnedBy)}}function Gt(n,o){if(1&n&&(e.qex(0),e.j41(1,"a",6),e.EFF(2),e.k0s(),e.EFF(3),e.nI1(4,"skillLevelToShortString"),e.bVm()),2&n){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(1),e.FCK("routerLink","../",i.hasSkillCards?"personas":"demons","/",t.demon,""),e.R7$(1),e.JRh(t.demon),e.R7$(1),e.SpI(" ",e.bMT(4,4,t.level)," ")}}function jt(n,o){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.SpI("",t.demon," ")}}function Ot(n,o){if(1&n&&(e.j41(0,"li"),e.DNE(1,Gt,5,6,"ng-container",0),e.DNE(2,jt,2,1,"ng-container",0),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.Y8G("ngIf",t.level>=-99),e.R7$(1),e.Y8G("ngIf",t.level<-99)}}function wt(n,o){if(1&n&&(e.j41(0,"td")(1,"ul",4),e.DNE(2,Ot,3,2,"li",5),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.data.transfer)}}const Nt=function(n,o){return{extra:n,unique:o}};function Ht(n,o){if(1&n&&e.nrm(0,"tr",7),2&n){const t=o.$implicit,i=e.XpG();e.Y8G("hasInherit",!!i.inheritOrder)("hasTarget",i.hasTarget)("hasRank",i.hasRank)("isPersona",i.isPersona)("hasTransferTitle",!!i.transferTitle)("hasSkillCards",i.transferTitle.includes("Card"))("data",t)("ngClass",e.l_i(8,Nt,t.rank>70&&t.rank<90,t.rank>90))}}let Ct=(()=>{class n{constructor(){this.hasInherit=!1,this.hasTarget=!0,this.hasRank=!0,this.hasLearned=!0,this.hasLvl=!1,this.isPersona=!1,this.hasTransferTitle=!1,this.hasSkillCards=!1,this.skillLvl=-1}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tr",8,"app-smt-skill-list-row"]],inputs:{hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLearned:"hasLearned",hasLvl:"hasLvl",isPersona:"isPersona",hasTransferTitle:"hasTransferTitle",hasSkillCards:"hasSkillCards",skillLvl:"skillLvl",data:"data"},attrs:De,decls:16,vars:18,consts:[[4,"ngIf"],[3,"color",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"comma-list"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,s){1&i&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"skillCostToString"),e.k0s(),e.DNE(8,Ae,2,4,"td",0),e.DNE(9,at,2,1,"td",0),e.DNE(10,lt,3,4,"td",0),e.DNE(11,Ge,2,3,"td",1),e.DNE(12,je,3,4,"td",0),e.DNE(13,Te,3,4,"td",2),e.DNE(14,yt,3,1,"td",0),e.DNE(15,wt,3,1,"td",0)),2&i&&(e.R7$(1),e.ZvI("element-icon ",s.data.element,""),e.R7$(1),e.JRh(s.data.element),e.R7$(2),e.JRh(s.data.name),e.R7$(1),e.xc7("color",s.data.cost?null:"transparent"),e.R7$(1),e.JRh(e.bMT(7,16,s.data.cost)),e.R7$(2),e.Y8G("ngIf",s.data.damage),e.R7$(1),e.Y8G("ngIf",!s.data.damage),e.R7$(1),e.Y8G("ngIf",s.hasTarget),e.R7$(1),e.Y8G("ngIf",s.hasRank),e.R7$(1),e.Y8G("ngIf",s.data.inherit),e.R7$(1),e.Y8G("ngIf",s.hasLvl),e.R7$(1),e.Y8G("ngIf",s.hasLearned),e.R7$(1),e.Y8G("ngIf",s.hasTransferTitle))},dependencies:[b.YU,b.Sq,b.bT,Z.Wk,O.X2,O.Q3,O.wv],encapsulation:2,changeDetection:0})}return n})(),Yt=(()=>{class n extends V{constructor(){super(...arguments),this.hasTarget=!1,this.hasRank=!0,this.isPersona=!1,this.lang="en",this.transferTitle=""}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-smt-skill-list"]],inputs:{hasTarget:"hasTarget",hasRank:"hasRank",isPersona:"isPersona",lang:"lang",transferTitle:"transferTitle"},features:[e.Jv_([ue]),e.Vt3],decls:8,vars:14,consts:[["appPositionSticky","",1,"list-table"],["appColumnWidths","",1,"app-skill-list-header","sticky-header",3,"hasInherit","hasTarget","hasRank","lang","transferTitle","sortFunIndex","sortFunIndexChanged"],["stickyHeader",""],[1,"list-table"],["appColumnWidths","",1,"app-skill-list-header",3,"hasInherit","hasTarget","hasRank","lang","transferTitle"],["hiddenHeader",""],["class","app-smt-skill-list-row",3,"hasInherit","hasTarget","hasRank","isPersona","hasTransferTitle","hasSkillCards","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasInherit","hasTarget","hasRank","isPersona","hasTransferTitle","hasSkillCards","data","ngClass"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"tfoot",1,2),e.bIt("sortFunIndexChanged",function(p){return s.sortFunIndex=p}),e.k0s()(),e.j41(3,"table",3),e.nrm(4,"tfoot",4,5),e.j41(6,"tbody"),e.DNE(7,Ht,1,11,"tr",6),e.k0s()()),2&i&&(e.R7$(1),e.Y8G("hasInherit",!!s.inheritOrder)("hasTarget",s.hasTarget)("hasRank",s.hasRank)("lang",s.lang)("transferTitle",s.transferTitle)("sortFunIndex",s.sortFunIndex),e.R7$(3),e.xc7("visibility","collapse"),e.Y8G("hasInherit",!!s.inheritOrder)("hasTarget",s.hasTarget)("hasRank",s.hasRank)("lang",s.lang)("transferTitle",s.transferTitle),e.R7$(3),e.Y8G("ngForOf",s.rowData))},dependencies:[b.YU,b.Sq,oe,de,he,Ct],encapsulation:2,changeDetection:0})}return n})(),Ut=(()=>{class n extends H{constructor(t,i,s){super(t,i,s),this.compConfig=s.compConfig,this.appName=`List of Skills - ${s.appName}`,this.transferTitle=this.compConfig.hasSkillCards?"Skill Card":"",this.defaultSortFun=(r,p)=>1e4*(this.compConfig.elemOrder[r.element]-this.compConfig.elemOrder[p.element])+r.rank-p.rank}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Q.hE),e.rXU(e.gRc),e.rXU(ve.i))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-skill-list-container"]],features:[e.Vt3],decls:2,vars:7,consts:[[3,"elemOrder","isPersona","transferTitle","hasTarget","rowData"]],template:function(i,s){1&i&&(e.nrm(0,"app-smt-skill-list",0),e.nI1(1,"async")),2&i&&e.Y8G("elemOrder",s.compConfig.elemOrder)("isPersona",!0)("transferTitle",s.transferTitle)("hasTarget",!0)("rowData",e.bMT(1,5,s.skills))},dependencies:[Yt,b.Jj],encapsulation:2,changeDetection:0})}return n})();function xt(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.j41(2,"a",3),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.SpI(" Error: Could not find entry in compendium for ",t.name,". Did you mean: "),e.R7$(1),e.Mz_("routerLink","../",t.name.split("%20").join(" "),""),e.R7$(1),e.JRh(t.name.split("%20").join(" "))}}function At(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.SpI("Error: Could not find entry in compendium for ",t.name,"")}}let Bt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-missing"]],inputs:{name:"name"},decls:9,vars:3,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],[3,"routerLink"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.EFF(4),e.k0s()()(),e.j41(5,"tbody")(6,"tr"),e.DNE(7,xt,4,3,"td",2),e.DNE(8,At,2,1,"td",2),e.k0s()()()),2&i&&(e.R7$(4),e.SpI("Entry for ",s.name,""),e.R7$(3),e.Y8G("ngIf",s.name&&s.name.includes("%20")),e.R7$(1),e.Y8G("ngIf",!s.name||!s.name.includes("%20")))},dependencies:[b.bT,Z.Wk],encapsulation:2,changeDetection:0})}return n})();function Xt(n,o){if(1&n&&(e.j41(0,"h2"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.title)}}function Pt(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.Price,t.lang))}}function Jt(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}function Mt(n,o){1&n&&(e.j41(0,"th"),e.EFF(1,"Inherits"),e.k0s())}function Vt(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}function Wt(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.price)}}function qt(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}function Qt(n,o){if(1&n&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.ZvI("element-icon i",t.inherits,""),e.R7$(1),e.JRh(t.inherits)}}const Kt=["*"];let Rt=(()=>{class n{constructor(){this.title="Demon Entry",this.statHeaders=[],this.stats=[],this.fusionHeaders=[],this.price=0,this.lang="en",this.msgs=re.Cj}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-stats"]],inputs:{title:"title",statHeaders:"statHeaders",stats:"stats",fusionHeaders:"fusionHeaders",inherits:"inherits",price:"price",lang:"lang"},ngContentSelectors:Kt,decls:20,vars:13,consts:[[4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(i,s){1&i&&(e.NAR(),e.qex(0),e.DNE(1,Xt,2,1,"h2",0),e.j41(2,"table",1)(3,"thead")(4,"tr")(5,"th",2),e.EFF(6),e.nI1(7,"translateComp"),e.k0s()(),e.j41(8,"tr"),e.DNE(9,Pt,3,4,"th",0),e.DNE(10,Jt,2,1,"th",3),e.DNE(11,Mt,2,0,"th",0),e.DNE(12,Vt,2,1,"th",3),e.k0s()(),e.j41(13,"tbody")(14,"tr"),e.DNE(15,Wt,2,1,"td",0),e.DNE(16,qt,2,1,"td",3),e.DNE(17,Qt,3,4,"td",0),e.SdG(18),e.k0s()()(),e.eu8(19),e.bVm()),2&i&&(e.R7$(1),e.Y8G("ngIf",s.title.includes("Lvl")),e.R7$(4),e.BMQ("colSpan",s.stats.length+s.fusionHeaders.length+(s.inherits?1:0)+(s.price?1:0)),e.R7$(1),e.SpI(" ",s.title.includes("Lvl")?e.i5U(7,10,s.msgs.Stats,s.lang):s.title," "),e.R7$(3),e.Y8G("ngIf",s.price),e.R7$(1),e.Y8G("ngForOf",s.statHeaders),e.R7$(1),e.Y8G("ngIf",s.inherits),e.R7$(1),e.Y8G("ngForOf",s.fusionHeaders),e.R7$(3),e.Y8G("ngIf",s.price),e.R7$(1),e.Y8G("ngForOf",s.stats),e.R7$(1),e.Y8G("ngIf",s.inherits))},dependencies:[b.Sq,b.bT,O.uz],encapsulation:2,changeDetection:0})}return n})();function zt(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG(2);e.BMQ("colSpan",t.ailmentHeaders.length),e.R7$(1),e.JRh(e.i5U(2,2,t.msgs.Ailment,t.lang))}}const Zt=function(n){return["element-icon",n]};function en(n,o){if(1&n&&(e.j41(0,"th")(1,"div",6),e.EFF(2),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG(2);e.xc7("width",(i.ailmentHeaders.length?50:100)/i.resistHeaders.length,"%"),e.R7$(1),e.Y8G("ngClass",e.eq3(4,Zt,t)),e.R7$(1),e.JRh(t)}}function tn(n,o){if(1&n&&(e.j41(0,"th")(1,"div"),e.EFF(2),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG(2);e.xc7("width",50/i.ailmentHeaders.length,"%"),e.R7$(2),e.JRh(t)}}const Xe=function(n){return["resists",n]};function nn(n,o){if(1&n&&(e.j41(0,"td",6),e.nI1(1,"reslvlToColor"),e.EFF(2),e.nI1(3,"reslvlToStringJa"),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(2);e.Y8G("ngClass",e.eq3(7,Xe,e.bMT(1,2,t))),e.R7$(2),e.SpI(" ",e.i5U(3,4,t,i.lang)," ")}}function sn(n,o){if(1&n&&(e.j41(0,"td",6),e.nI1(1,"reslvlToString"),e.EFF(2),e.nI1(3,"reslvlToStringJa"),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(2);e.Y8G("ngClass",e.eq3(7,Xe,e.bMT(1,2,t))),e.R7$(2),e.SpI(" ",e.i5U(3,4,t,i.lang)," ")}}function on(n,o){if(1&n&&(e.j41(0,"td",6),e.EFF(1),e.nI1(2,"resmodToString"),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngClass",e.eq3(4,Xe,t%1024==40?"no":"")),e.R7$(1),e.SpI(" ",e.bMT(2,2,t)," ")}}function rn(n,o){if(1&n&&(e.j41(0,"td",6),e.EFF(1),e.nI1(2,"resmodToString"),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngClass",e.eq3(4,Xe,t%1024==40?"no":"")),e.R7$(1),e.SpI(" ",e.bMT(2,2,t)," ")}}function an(n,o){if(1&n&&(e.j41(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8),e.nI1(9,"translateComp"),e.k0s(),e.DNE(10,zt,3,5,"th",3),e.k0s(),e.j41(11,"tr"),e.DNE(12,en,3,6,"th",4),e.DNE(13,tn,3,3,"th",4),e.k0s()(),e.j41(14,"tbody")(15,"tr"),e.DNE(16,nn,4,9,"td",5),e.DNE(17,sn,4,9,"td",5),e.k0s(),e.j41(18,"tr"),e.DNE(19,on,3,6,"td",5),e.DNE(20,rn,3,6,"td",5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(3),e.BMQ("colspan",t.resistHeaders.length+t.ailmentHeaders.length),e.R7$(1),e.JRh(t.title||e.i5U(5,11,t.msgs.Resistances,t.lang)),e.R7$(3),e.BMQ("colSpan",t.resistHeaders.length),e.R7$(1),e.JRh(e.i5U(9,14,t.msgs.Element,t.lang)),e.R7$(2),e.Y8G("ngIf",t.ailmentHeaders.length),e.R7$(2),e.Y8G("ngForOf",t.resistHeaders),e.R7$(1),e.Y8G("ngForOf",t.ailmentHeaders),e.R7$(3),e.Y8G("ngForOf",t.resists),e.R7$(1),e.Y8G("ngForOf",t.ailments),e.R7$(2),e.Y8G("ngForOf",t.resists),e.R7$(1),e.Y8G("ngForOf",t.ailments)}}let vt=(()=>{class n{constructor(){this.title="",this.resistHeaders=[],this.resists=[],this.ailmentHeaders=[],this.ailments=[],this.lang="en",this.msgs=re.wc}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-resists"]],inputs:{title:"title",resistHeaders:"resistHeaders",resists:"resists",ailmentHeaders:"ailmentHeaders",ailments:"ailments",lang:"lang"},decls:1,vars:1,consts:[["class","entry-table",4,"ngIf"],[1,"entry-table"],[1,"title"],[4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(i,s){1&i&&e.DNE(0,an,21,17,"table",0),2&i&&e.Y8G("ngIf",s.resistHeaders.length)},dependencies:[b.YU,b.Sq,b.bT,O.uz,O.FA,O.g7,O.Fz,O.jk],encapsulation:2,changeDetection:0})}return n})();function ln(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.Target,t.lang))}}function cn(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.Rank,t.lang))}}function hn(n,o){1&n&&(e.j41(0,"th"),e.EFF(1,"Inherit"),e.k0s())}function mn(n,o){1&n&&(e.j41(0,"th"),e.EFF(1,"Lvl"),e.k0s())}const pn=function(n,o){return{extra:n,unique:o}};function un(n,o){if(1&n&&e.nrm(0,"tr",4),2&n){const t=o.$implicit,i=e.XpG();e.Y8G("hasTarget",i.hasTarget)("hasRank",i.hasRank)("hasInherit",i.hasInherit)("hasLearned",!1)("hasLvl",i.hasLvl)("skillLvl",t.level)("data",t)("ngClass",e.l_i(8,pn,t.rank>70&&t.rank<90,t.rank>90))}}function fn(n,o){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.BMQ("colspan",t.skillHeaderLen),e.R7$(1),e.SpI("No ",t.title," Found")}}let Dt=(()=>{class n{constructor(){this.title="Learned Skills",this.hasInherit=!1,this.hasTarget=!1,this.hasRank=!1,this.hasLvl=!0,this.lang="en",this.skillHeaderLen=5,this.msgs=re.vf}ngOnInit(){this.nextColIndices()}ngOnChanges(){this.nextSkills()}nextColIndices(){this.hasInherit&&(this.skillHeaderLen+=1),this.hasTarget&&(this.skillHeaderLen+=1),this.hasRank&&(this.skillHeaderLen+=1)}nextSkills(){this.skills=Object.keys(this.skillLevels).map(t=>this.compendium.getSkill(t));for(const t of this.skills)t.level=this.skillLevels[t.name];this.elemOrder&&this.skills.sort((t,i)=>200*(t.level-i.level)+this.elemOrder[t.element]-this.elemOrder[i.element])}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-skills"]],inputs:{title:"title",hasInherit:"hasInherit",hasTarget:"hasTarget",hasRank:"hasRank",hasLvl:"hasLvl",compendium:"compendium",elemOrder:"elemOrder",skillLevels:"skillLevels",lang:"lang"},features:[e.OA$],decls:26,vars:24,consts:[[1,"entry-table"],[1,"title"],[4,"ngIf"],["class","app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass",4,"ngFor","ngForOf"],[1,"app-smt-skill-list-row",3,"hasTarget","hasRank","hasInherit","hasLearned","hasLvl","skillLvl","data","ngClass"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.EFF(4),e.k0s()(),e.j41(5,"tr")(6,"th"),e.EFF(7),e.nI1(8,"translateComp"),e.k0s(),e.j41(9,"th"),e.EFF(10),e.nI1(11,"translateComp"),e.k0s(),e.j41(12,"th"),e.EFF(13),e.nI1(14,"translateComp"),e.k0s(),e.j41(15,"th"),e.EFF(16),e.nI1(17,"translateComp"),e.k0s(),e.DNE(18,ln,3,4,"th",2),e.DNE(19,cn,3,4,"th",2),e.DNE(20,hn,2,0,"th",2),e.DNE(21,mn,2,0,"th",2),e.k0s()(),e.j41(22,"tbody"),e.DNE(23,un,1,11,"tr",3),e.DNE(24,fn,3,2,"tr",2),e.nrm(25,"tr"),e.k0s()()),2&i&&(e.R7$(3),e.BMQ("colSpan",s.skillHeaderLen),e.R7$(1),e.JRh(s.title),e.R7$(3),e.JRh(e.i5U(8,12,s.msgs.Elem,s.lang)),e.R7$(3),e.JRh(e.i5U(11,15,s.msgs.Name,s.lang)),e.R7$(3),e.JRh(e.i5U(14,18,s.msgs.Cost,s.lang)),e.R7$(3),e.JRh(e.i5U(17,21,s.msgs.Effect,s.lang)),e.R7$(2),e.Y8G("ngIf",s.hasTarget),e.R7$(1),e.Y8G("ngIf",s.hasRank),e.R7$(1),e.Y8G("ngIf",s.hasInherit),e.R7$(1),e.Y8G("ngIf",s.hasLvl),e.R7$(2),e.Y8G("ngForOf",s.skills),e.R7$(1),e.Y8G("ngIf",!s.skills.length))},dependencies:[b.YU,b.Sq,b.bT,Ct,O.uz],encapsulation:2,changeDetection:0})}return n})();function dn(n,o){if(1&n&&(e.j41(0,"th",4),e.EFF(1,"Inheritable Skills"),e.k0s()),2&n){const t=e.XpG();e.BMQ("colspan",t.inheritHeaders.length)}}function gn(n,o){if(1&n&&(e.j41(0,"th",4),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG();e.BMQ("colspan",t.inheritHeaders.length),e.R7$(1),e.SpI(" ",e.i5U(2,2,t.msgs.SkillAffinities,t.lang)," ")}}function _n(n,o){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.JRh(t)}}function kn(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.ZvI("element-icon ",t,""),e.R7$(1),e.JRh(t)}}function Fn(n,o){if(1&n&&(e.j41(0,"th"),e.DNE(1,_n,2,1,"ng-container",3),e.DNE(2,kn,2,4,"div",5),e.k0s()),2&n){const t=e.XpG();e.xc7("width",100/t.inheritHeaders.length,"%"),e.R7$(1),e.Y8G("ngIf",!t.hasIcons),e.R7$(1),e.Y8G("ngIf",t.hasIcons)}}function Cn(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.xc7("color",t?null:"transparent"),e.R7$(1),e.SpI(" ",t?"yes":"no"," ")}}function Rn(n,o){if(1&n&&(e.j41(0,"tr"),e.DNE(1,Cn,2,3,"td",6),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.inherits)}}function vn(n,o){if(1&n&&(e.j41(0,"td"),e.nI1(1,"roundInheritPercent"),e.EFF(2),e.k0s()),2&n){const t=o.$implicit;e.ZvI("affinity",e.bMT(1,4,t),""),e.R7$(2),e.SpI(" ",t,"% ")}}function Dn(n,o){if(1&n&&(e.j41(0,"tr"),e.DNE(1,vn,3,6,"td",7),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.inherits)}}function bn(n,o){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"affinityToString"),e.k0s()),2&n){const t=o.$implicit;e.ZvI("affinity",t,""),e.R7$(1),e.SpI(" ",e.bMT(2,4,t)," ")}}function In(n,o){if(1&n&&(e.j41(0,"tr"),e.DNE(1,bn,3,6,"td",7),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.inherits)}}let Tn=(()=>{class n{constructor(){this.inheritHeaders=[],this.inherits=[],this.hasChance=!1,this.hasIcons=!0,this.hasLvls=!1,this.lang="en",this.msgs=re.dx}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-inherits"]],inputs:{inheritHeaders:"inheritHeaders",inherits:"inherits",hasChance:"hasChance",hasIcons:"hasIcons",hasLvls:"hasLvls",lang:"lang"},decls:11,vars:6,consts:[[1,"entry-table"],["class","title",4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"title"],[3,"class",4,"ngIf"],[3,"color",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"thead")(2,"tr"),e.DNE(3,dn,2,1,"th",1),e.DNE(4,gn,3,5,"th",1),e.k0s(),e.j41(5,"tr"),e.DNE(6,Fn,3,4,"th",2),e.k0s()(),e.j41(7,"tbody"),e.DNE(8,Rn,2,1,"tr",3),e.DNE(9,Dn,2,1,"tr",3),e.DNE(10,In,2,1,"tr",3),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngIf",!s.hasLvls),e.R7$(1),e.Y8G("ngIf",s.hasLvls&&s.inheritHeaders.length),e.R7$(2),e.Y8G("ngForOf",s.inheritHeaders),e.R7$(2),e.Y8G("ngIf",!s.hasLvls&&!s.hasChance),e.R7$(1),e.Y8G("ngIf",s.hasChance),e.R7$(1),e.Y8G("ngIf",s.hasLvls))},dependencies:[b.Sq,b.bT,O.uz,O.XM,O.D8],encapsulation:2,changeDetection:0})}return n})();const Ln=function(){return{exact:!0}};function En(n,o){if(1&n&&(e.j41(0,"th",4)(1,"a",5),e.EFF(2),e.nI1(3,"translateComp"),e.k0s()()),2&n){const t=o.$implicit,i=e.XpG();e.xc7("width",100/i.fusionOptions.length,"%"),e.Y8G("routerLink",t.link)("routerLinkActiveOptions",e.lJ4(9,Ln)),e.R7$(1),e.Y8G("routerLink",t.link),e.R7$(1),e.JRh(e.i5U(3,6,t.title,i.lang))}}function Sn(n,o){if(1&n&&(e.j41(0,"tr")(1,"th",6),e.EFF(2),e.nI1(3,"translateComp"),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.BMQ("colspan",t.fusionOptions.length),e.R7$(1),e.SpI(" ",e.i5U(3,2,t.msgs.DlcExcluded,t.lang)," ")}}function $n(n,o){if(1&n&&(e.j41(0,"tr")(1,"th",6),e.SdG(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.BMQ("colspan",t.fusionOptions.length)}}const yn=["*"];let Gn=(()=>{class n{constructor(){this.hasTripleFusion=!1,this.showFusionAlert=!1,this.excludedDlc=!1,this.lang="en",this.msgs=re.Lq,this.fusionOptions=[{title:this.msgs.NormalFissions,link:"fissions"},{title:this.msgs.NormalFusions,link:"fusions"}]}ngOnInit(){this.hasTripleFusion&&(this.fusionOptions=[{title:this.msgs.DoubleFissions,link:"fissions"},{title:this.msgs.TripleFissions,link:"fissions/triple"},{title:this.msgs.TripleFusions,link:"fusions/triple"},{title:this.msgs.DoubleFusions,link:"fusions"}])}ngOnChanges(){setTimeout(()=>this.stickyTable.nextEdges())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-smt-fusions"]],viewQuery:function(i,s){if(1&i&&e.GBs(oe,5),2&i){let r;e.mGM(r=e.lsd())&&(s.stickyTable=r.first)}},inputs:{hasTripleFusion:"hasTripleFusion",showFusionAlert:"showFusionAlert",excludedDlc:"excludedDlc",lang:"lang"},features:[e.Jv_([ue]),e.OA$],ngContentSelectors:yn,decls:11,vars:3,consts:[["appPositionSticky","",1,"list-table"],["stickyTable",""],["class","nav","routerLinkActive","active",3,"routerLink","width","routerLinkActiveOptions",4,"ngFor","ngForOf"],[4,"ngIf"],["routerLinkActive","active",1,"nav",3,"routerLink","routerLinkActiveOptions"],[3,"routerLink"],[1,"title"]],template:function(i,s){1&i&&(e.NAR(),e.j41(0,"div")(1,"table",0,1)(3,"thead")(4,"tr"),e.DNE(5,En,4,10,"th",2),e.k0s(),e.DNE(6,Sn,4,5,"tr",3),e.nrm(7,"tr"),e.DNE(8,$n,3,1,"tr",3),e.nrm(9,"tr"),e.k0s()(),e.nrm(10,"router-outlet"),e.k0s()),2&i&&(e.R7$(5),e.Y8G("ngForOf",s.fusionOptions),e.R7$(1),e.Y8G("ngIf",s.excludedDlc),e.R7$(2),e.Y8G("ngIf",s.showFusionAlert))},dependencies:[b.Sq,b.bT,Z.n3,Z.Wk,Z.wQ,oe,O.uz],encapsulation:2,changeDetection:0})}return n})();var we=z(8696);const jn=function(){return["HP","MP"]};let On=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-enemy-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:19,vars:15,consts:[[3,"title","statHeaders","stats"],[1,"entry-table"],["colspan","2",1,"title"],[3,"resistHeaders","resists","ailmentHeaders","ailments"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"]],template:function(i,s){1&i&&(e.nrm(0,"app-demon-stats",0),e.j41(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5,"Appearances"),e.k0s()(),e.j41(6,"tr")(7,"th"),e.EFF(8,"Areas"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Drops"),e.k0s()()(),e.j41(11,"tbody")(12,"tr")(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()()(),e.nrm(17,"app-demon-resists",3)(18,"app-demon-skills",4)),2&i&&(e.Y8G("title","Lvl "+s.demon.lvl+" "+s.demon.race+" "+s.demon.name)("statHeaders",e.lJ4(14,jn).concat(s.compConfig.baseStats))("stats",s.demon.stats.concat(s.demon.estats)),e.R7$(14),e.JRh(s.demon.area),e.R7$(2),e.JRh(s.demon.drop),e.R7$(1),e.Y8G("resistHeaders",s.compConfig.resistElems)("resists",s.demon.resists)("ailmentHeaders",s.compConfig.ailmentElems)("ailments",s.demon.ailments),e.R7$(1),e.Y8G("hasRank",!0)("hasTarget",!0)("elemOrder",s.compConfig.elemOrder)("compendium",s.compendium)("skillLevels",s.demon.skills))},dependencies:[Rt,vt,Dt],encapsulation:2,changeDetection:0})}return n})();function wn(n,o){if(1&n&&(e.qex(0),e.nrm(1,"app-demon-stats",2)(2,"app-demon-resists",3)(3,"app-demon-inherits",4)(4,"app-demon-skills",5)(5,"app-smt-fusions",6),e.bVm()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("title","Lvl "+t.demon.lvl+" "+t.demon.race+" "+t.demon.name)("price",t.demon.price)("statHeaders",t.compConfig.baseStats)("stats",t.demon.stats)("inherits",t.demon.inherits),e.R7$(1),e.Y8G("resistHeaders",t.compConfig.resistElems)("resists",t.demon.resists),e.R7$(1),e.Y8G("hasChance",!t.compConfig.hasManualInheritance)("inheritHeaders",t.compConfig.affinityElems)("inherits",t.demon.affinities),e.R7$(1),e.Y8G("hasRank",!0)("hasTarget",!0)("elemOrder",t.compConfig.elemOrder)("compendium",t.compendium)("skillLevels",t.demon.skills),e.R7$(1),e.Y8G("hasTripleFusion",!0)}}function Nn(n,o){if(1&n&&e.nrm(0,"app-demon-missing",7),2&n){const t=e.XpG();e.Y8G("name",t.name)}}function Hn(n,o){if(1&n&&e.nrm(0,"app-demon-entry",1),2&n){const t=e.XpG();e.Y8G("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}function Yn(n,o){if(1&n&&e.nrm(0,"app-enemy-entry",1),2&n){const t=e.XpG();e.Y8G("name",t.name)("demon",t.demon)("compConfig",t.compConfig)("compendium",t.compendium)}}let Un=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-entry"]],inputs:{name:"name",demon:"demon",compendium:"compendium",compConfig:"compConfig"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"name",4,"ngIf"],[3,"title","price","statHeaders","stats","inherits"],[3,"resistHeaders","resists"],[3,"hasChance","inheritHeaders","inherits"],[3,"hasRank","hasTarget","elemOrder","compendium","skillLevels"],[3,"hasTripleFusion"],[3,"name"]],template:function(i,s){1&i&&(e.DNE(0,wn,6,16,"ng-container",0),e.DNE(1,Nn,1,1,"app-demon-missing",1)),2&i&&(e.Y8G("ngIf",s.demon),e.R7$(1),e.Y8G("ngIf",!s.demon))},dependencies:[b.bT,Bt,Rt,vt,Dt,Tn,Gn],encapsulation:2,changeDetection:0})}return n})(),bt=(()=>{class n{constructor(t,i,s,r){this.route=t,this.title=i,this.currentDemonService=s,this.fusionDataService=r,this.subscriptions=[],this.appName="Test App",this.appName=r.appName,this.compConfig=r.compConfig}ngOnInit(){this.subscribeAll()}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getDemonEntry()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.name=t,this.getDemonEntry()})),this.route.params.subscribe(t=>{this.currentDemonService.nextCurrentDemon(t.demonName)})}getDemonEntry(){this.compendium&&this.name&&(this.title.setTitle(`${this.name} - ${this.appName}`),this.demon=this.compendium.getDemon(this.name))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Z.nX),e.rXU(Q.hE),e.rXU(we.i),e.rXU(ve.i))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-demon-entry-container"]],decls:2,vars:2,consts:[[3,"name","demon","compConfig","compendium",4,"ngIf"],[3,"name","demon","compConfig","compendium"]],template:function(i,s){1&i&&(e.DNE(0,Hn,1,4,"app-demon-entry",0),e.DNE(1,Yn,1,4,"app-enemy-entry",0)),2&i&&(e.Y8G("ngIf",!s.demon||!s.demon.isEnemy),e.R7$(1),e.Y8G("ngIf",s.demon&&s.demon.isEnemy))},dependencies:[b.bT,Un,On],encapsulation:2,changeDetection:0})}return n})();function Pe(n,o){const t=o.getDemon(n.name1),i=o.getDemon(n.name2);return{price:t.price+i.price,race1:t.race,lvl1:t.currLvl,name1:n.name1,race2:i.race,lvl2:i.currLvl,name2:n.name2}}function ct(n,o){const t=o.getDemon(n.name1),i=o.getDemon(n.name2);return{price:t.price,race1:t.race,lvl1:t.currLvl,name1:n.name1,race2:i.race,lvl2:i.lvl,name2:n.name2}}function ht(n,o){const t=o.getDemon(n.name1),i=o.getDemon(n.name2),s=o.getDemon(n.name3);return{price:t.price+i.price+s.price,d1:t,d2:i,d3:s}}function Je(n,o){return parseInt(o.map(t=>n.includes(t)?"1":"0").join(""),2)||0}function It(n,o){return n.map((t,i,s)=>Je(s.slice(0,i+1),o))}function Tt(n,o,t,i,s,r){let p=t,F=[p];const Y=i.getSpecialNameEntries(p),B=o[o.length-1];if(0!==Y.length&&(p=Y.find(J=>0===i.getSpecialNameEntries(J).length),F.unshift(Y.filter(J=>J!==p).join(" x ")),F.unshift(p)),n.length>0){const J=function Pn(n,o,t,i,s){const{fusionCalculator:r}=s,p=n.slice(0,1);if(n.length<2)return p;let F=p[0],Y=o[0];for(let B=1;B<n.length;B++){const J=n[B],M=o[B],x=r.getFusions(F,t,i).map(U=>ct(U,t)).sort((U,ke)=>U.price-ke.price);let j=!1;for(const U of x)if(U.name1===J&&(M&t.getDemon(U.name2).inherits)===M){p.push(J),p.push(U.name2),F=p[p.length-1],Y=M,j=!0;break}if(j)continue;const K=r.getFusions(J,t,i).reduce((U,ke)=>(U[ke.name1]=ke.name2,U),{});for(const U of x)if(K[U.name2]&&(Y&t.getDemon(U.name2).inherits)===Y&&(M&t.getDemon(K[U.name2]).inherits)===M){p.push(U.name1),p.push(U.name2),p.push(J),p.push(K[U.name2]),F=p[p.length-1],Y=M,j=!0;break}if(!j)return[]}return p}(n,o,i,s,r);if(0===J.length)return[];const M=J[J.length-1];let x=mt(M,p,B,i,s,r);if(0===x.length){const j=i.getDemon(p),te=i.getResultDemonLvls(j.race).map(K=>i.reverseLookupDemon(j.race,K)).filter(K=>K!==p);for(const K of s.elementDemons.concat(te)){if((B&i.getDemon(K).inherits)!==B)continue;const U=mt(M,K,B,i,s,r),ke=mt(K,p,B,i,s,r);if(0!==U.length&&0!==ke.length){x=U.concat(ke.slice(1));break}}}if(0===x.length)return[];F=J.concat(x.slice(1),F.slice(1))}return F}function mt(n,o,t,i,s,r){const{fissionCalculator:p,fusionCalculator:F}=r,Y=[n];if(n===o)return Y;const B=F.getFusions(n,i,s).map(x=>ct(x,i)).sort((x,j)=>x.price-j.price);for(const x of B)if(x.name2===o)return Y.push(x.name1),Y.push(o),Y;const J=p.getFusions(o,i,s).map(x=>Pe(x,i)).sort((x,j)=>x.price-j.price);B.sort((x,j)=>j.price-x.price);const M=B.reduce((x,j)=>(x[j.name2]=j.name1,x),{});for(const x of J){if(M[x.name1]&&(t&i.getDemon(x.name1).inherits)===t)return Y.push(M[x.name1]),Y.push(x.name1),Y.push(x.name2),Y.push(o),Y;if(M[x.name2]&&(t&i.getDemon(x.name2).inherits)===t)return Y.push(M[x.name2]),Y.push(x.name2),Y.push(x.name1),Y.push(o),Y}return[]}function Jn(n,o){if(1&n&&(e.j41(0,"option",16),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function Mn(n,o){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngValue",t),e.R7$(1),e.JRh(t.name)}}function Vn(n,o){if(1&n&&(e.j41(0,"option",16),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(3);e.Y8G("value",t),e.R7$(1),e.JRh(i.recipeConfig.displayElems[t]||t)}}function Wn(n,o){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngValue",t),e.R7$(1),e.JRh(t.name)}}function qn(n,o){if(1&n&&(e.j41(0,"option",16),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function Qn(n,o){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngValue",t),e.R7$(1),e.JRh(t.name)}}function Kn(n,o){if(1&n&&(e.j41(0,"select",25),e.DNE(1,Qn,2,2,"option",8),e.k0s()),2&n){const t=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.Y8G("ngForOf",i.learnedBy[t.controls.skill.value.name])}}function zn(n,o){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("ngValue",t),e.R7$(1),e.JRh(t.name)}}function Zn(n,o){if(1&n&&(e.j41(0,"select",25),e.DNE(1,zn,2,2,"option",8),e.k0s()),2&n){const t=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.Y8G("ngForOf",i.demons[t.controls.race.value])}}function es(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"label"),e.EFF(3),e.nI1(4,"translateComp"),e.j41(5,"input",20),e.bIt("change",function(){e.eBV(t);const s=e.XpG().$implicit,r=e.XpG();return e.Njj(r.setIngredDemon(s))}),e.k0s()()(),e.j41(6,"td")(7,"select",21),e.bIt("change",function(){e.eBV(t);const s=e.XpG().$implicit,r=e.XpG();return e.Njj(r.setIngredElem(s))}),e.j41(8,"option",22),e.EFF(9,"-"),e.k0s(),e.DNE(10,Vn,2,2,"option",6),e.k0s()(),e.j41(11,"td")(12,"select",23),e.bIt("change",function(){e.eBV(t);const s=e.XpG().$implicit,r=e.XpG();return e.Njj(r.setIngredDemon(s))}),e.DNE(13,Wn,2,2,"option",8),e.k0s()(),e.j41(14,"td")(15,"select",5),e.bIt("change",function(){e.eBV(t);const s=e.XpG().$implicit,r=e.XpG();return e.Njj(r.setIngredDemon(s))}),e.j41(16,"option",22),e.EFF(17,"-"),e.k0s(),e.DNE(18,qn,2,2,"option",6),e.k0s()(),e.j41(19,"td"),e.DNE(20,Kn,2,1,"select",24),e.DNE(21,Zn,2,1,"select",24),e.k0s()()}if(2&n){const t=e.XpG(),i=t.index,s=t.$implicit,r=e.XpG();e.R7$(3),e.Lme("",e.i5U(4,10,r.msgs.LearnsSkill,r.lang),"",i+1," "),e.R7$(4),e.BMQ("disabled",!s.controls.searchSkill.value||null),e.R7$(3),e.Y8G("ngForOf",r.elems),e.R7$(2),e.BMQ("disabled",!s.controls.searchSkill.value||null),e.R7$(1),e.Y8G("ngForOf",r.skills[s.controls.elem.value]),e.R7$(2),e.BMQ("disabled",s.controls.searchSkill.value||null),e.R7$(3),e.Y8G("ngForOf",r.races),e.R7$(2),e.Y8G("ngIf",s.controls.searchSkill.value),e.R7$(1),e.Y8G("ngIf",!s.controls.searchSkill.value)}}function ts(n,o){if(1&n&&(e.qex(0,18),e.DNE(1,es,22,13,"tr",19),e.bVm()),2&n){const t=o.index,i=e.XpG();e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("ngIf",t<i.maxSkills)}}function ns(n,o){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}function ss(n,o){if(1&n&&(e.j41(0,"td",29)(1,"ul"),e.DNE(2,ns,2,1,"li",30),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.recipeLeft)}}function is(n,o){if(1&n&&(e.j41(0,"td",31),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.NoRecipesFound,t.lang))}}function os(n,o){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(1),e.JRh(t)}}function rs(n,o){if(1&n&&(e.j41(0,"td",29)(1,"ul"),e.DNE(2,os,2,1,"li",30),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.recipeRight)}}function as(n,o){if(1&n&&(e.j41(0,"td",31),e.EFF(1),e.nI1(2,"translateComp"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.NoRecipesFound,t.lang))}}function ls(n,o){if(1&n&&(e.qex(0),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.bVm()),2&n){const t=e.XpG(2);e.R7$(1),e.Lme(" ",t.recipeResult.join(" x ")," = ",t.recipe.result,""),e.R7$(2),e.SpI(" [",t.resultSkills.join(", "),"] ")}}function cs(n,o){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translateComp"),e.bVm()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(e.i5U(2,1,t.msgs.NoRecipesFound,t.lang))}}function hs(n,o){if(1&n&&(e.j41(0,"table",1)(1,"tr")(2,"th",2),e.EFF(3),e.nI1(4,"translateComp"),e.k0s()(),e.j41(5,"tr")(6,"th"),e.EFF(7),e.nI1(8,"translateComp"),e.k0s(),e.j41(9,"th"),e.EFF(10),e.nI1(11,"translateComp"),e.k0s()(),e.j41(12,"tr"),e.DNE(13,ss,3,1,"td",26),e.DNE(14,is,3,4,"td",27),e.DNE(15,rs,3,1,"td",26),e.DNE(16,as,3,4,"td",27),e.k0s(),e.j41(17,"tr")(18,"td",28),e.DNE(19,ls,4,3,"ng-container",19),e.DNE(20,cs,3,4,"ng-container",19),e.k0s()()()),2&n){const t=e.XpG();e.R7$(3),e.JRh(e.i5U(4,9,t.msgs.FusionRecipe,t.lang)),e.R7$(4),e.JRh(e.i5U(8,12,t.msgs.LeftChain,t.lang)),e.R7$(3),e.JRh(e.i5U(11,15,t.msgs.RightChain,t.lang)),e.R7$(3),e.Y8G("ngIf",t.recipeLeft.length),e.R7$(1),e.Y8G("ngIf",!t.recipeLeft.length),e.R7$(1),e.Y8G("ngIf",t.recipeRight.length),e.R7$(1),e.Y8G("ngIf",!t.recipeRight.length),e.R7$(3),e.Y8G("ngIf",t.recipe.stepR.length),e.R7$(1),e.Y8G("ngIf",!t.recipe.stepR.length)}}let ms=(()=>{class n{constructor(t){this.fb=t,this.maxSkills=8,this.lang="en",this.internalMaxSkills=9,this.range99=Array(99),this.demons={},this.skills={},this.learnedBy={},this.msgs=re.hV,this.blankDemon={name:"-",race:"-",lvl:0,currLvl:0,price:0,inherits:0,skills:{},stats:[],resists:[],affinities:[],fusion:"normal",prereq:""},this.blankSkill={name:"-",element:"-",rank:99,cost:0,effect:"",target:"",level:0,learnedBy:[{demon:"-",level:0}]},this.createForm()}ngOnChanges(){this.initDropdowns()}createForm(){const t=[];for(let i=0;i<this.internalMaxSkills;i++)t.push(this.fb.group({searchSkill:!0,elem:"-",skill:this.blankSkill,race:{value:"-",disabled:!0},demon:this.blankDemon}));this.form=this.fb.group({race:"-",demon:this.blankDemon,ingreds:this.fb.array(t)}),this.form.valueChanges.subscribe(i=>{if(this.form.valid){const s=i.ingreds.filter(p=>"-"!==p.demon.name&&p.demon.name!==i.demon.name).map(p=>p.demon.name),r={};for(const p of i.ingreds)p.searchSkill&&"-"!==p.skill.name&&(r[p.skill.name]=p.demon.name);this.updateRecipe(function Bn(n,o,t,i,s,r){const{fissionCalculator:p,inheritElems:F,restrictInherits:Y,triExclusiveRaces:B,triFissionCalculator:J}=r,{normalChart:M}=s,x=i.getDemon(n),j={};for(const[P,A]of Object.entries(t))"-"!==A&&A!==x.name&&(j[P]=A);const K=Je(Object.keys(t).map(P=>i.getSkill(P)).map(P=>P.element),F);let U=i.getSpecialNameEntries(n);if(U.length<2&&B.includes(x.race)){const P=J.getFusions(n,i,s).map(A=>ht(A,i)).sort((A,ce)=>A.price-ce.price).find(A=>!((K&(A.d1.inherits|A.d2.inherits))!==K||"special"!==A.d1.fusion&&B.includes(A.d1.race)||"special"!==A.d2.fusion&&B.includes(A.d2.race)||"special"!==A.d3.fusion&&B.includes(A.d3.race)));P&&(U=[P.d1.name,P.d2.name,P.d3.name])}if(U.length<2){const P=p.getFusions(n,i,M).map(A=>Pe(A,i)).sort((A,ce)=>A.price-ce.price).find(A=>!((K&(i.getDemon(A.name1).inherits|i.getDemon(A.name2).inherits))!==K||"normal"!==i.getDemon(A.name1).fusion&&"special"!==i.getDemon(A.name1).fusion||"normal"!==i.getDemon(A.name2).fusion&&"special"!==i.getDemon(A.name2).fusion));P&&(U=[P.name1,P.name2])}const ke=U.map(P=>i.getDemon(P)).sort((P,A)=>A.price-P.price),He=Object.keys(j).map(P=>i.getSkill(P)),se=Je(He.map(P=>P.element),F),me=He.map(P=>Je([P.element],F));let le,Fe,Ve=0;for(let P=0;P<ke.length;P++){const A=ke[P];for(const ce of ke.slice(P+1))if((se&(A.inherits|ce.inherits))===se){const $t=(se&A.inherits).toString(2).split("1").length*(se&ce.inherits).toString(2).split("1").length;Ve<$t&&(le=A,Fe=ce,Ve=$t)}}const be={chain1:[],chain2:[],stepR:U,skills:j,result:n};if(!le)return be;const Ye=Object.values(j).filter((P,A,ce)=>ce.indexOf(P)===A),We=o.filter(P=>!Ye.includes(P));let Se=Math.ceil(Ye.length/2);Ye.sort((P,A)=>M.getLightDark(i.getDemon(P).race)-M.getLightDark(i.getDemon(A).race));let Ue=Ye.slice(0,Se),qe=Array(Ue.length).fill(0),xe=Ye.slice(Se),Qe=Array(xe.length).fill(0);if(Y){const{left:P,right:A}=function Xn(n,o,t,i){let s=[],r=[];const p=[],F=[],Y={},B=[];for(let J=0;J<t.length;J++){const M=t[J];0!==M?(Y.hasOwnProperty(M)||(Y[M]=[]),Y[M].push(i[J])):B.push(i[J])}for(const J of Object.keys(Y).sort()){const M=parseInt(J);p.length<=F.length?(M&n)===M?p.push(M):F.push(M):(M&o)===M?F.push(M):p.push(M)}for(const J of p)s=s.concat(Y[J]);for(const J of F)r=r.concat(Y[J]);for(const J of B)s.length<r.length?s.push(J):r.push(J);return{left:s.reverse(),right:r.reverse()}}(le.inherits,Fe.inherits,me,He.map(ce=>ce.name));Ue=P.map(ce=>j[ce]),qe=It(P.map(ce=>i.getSkill(ce).element),F),xe=A.map(ce=>j[ce]),Qe=It(A.map(ce=>i.getSkill(ce).element),F)}return Se=Math.ceil(We.length/2),Ue=We.slice(0,Se).concat(Ue),qe=Array(Se).fill(0).concat(qe),xe=We.slice(Se).concat(xe),Qe=Array(We.length-Se).fill(0).concat(Qe),be.chain1=Tt(Ue,qe,le.name,i,M,r),be.chain2=Tt(xe,Qe,Fe.name,i,M,r),be}(i.demon.name,s,r,this.compendium,this.squareChart,this.recipeConfig))}})}setIngredElem(t){t.controls.skill.setValue(this.skills[t.controls.elem.value][0]),this.setIngredDemon(t)}setIngredDemon(t){t.controls.demon.setValue((t.controls.searchSkill.value?this.learnedBy[t.controls.skill.value.name]:this.demons[t.controls.race.value])[0])}updateRecipe(t){const i={};for(const[s,r]of Object.entries(t.skills)){i[r]||(i[r]=[]);const p=this.compendium.getDemon(r).skills[s];i[r].push(s+(p>=2?` (${p})`:""))}this.recipe=t,this.recipeLeft=this.decodeRecipechain(t.chain1,i),this.recipeRight=this.decodeRecipechain(t.chain2,i),this.resultSkills=[],this.recipeResult=[];for(const s of t.stepR)this.recipeResult.push(i[s]?`${s} [${i[s].join(", ")}]`:s);for(const[s,r]of Object.entries(this.compendium.getDemon(t.result).skills).filter(p=>p[1]<2e3).sort((p,F)=>p[1]-F[1]))this.resultSkills.push(s+(r>=2?` (${r})`:""))}decodeRecipechain(t,i){const s=[];for(let r=0;r<t.length-2;r+=2){const p=i[t[r]]?"["+i[t[r]].join(", ")+"] ":"",F=i[t[r+1]]?"["+i[t[r+1]].join(", ")+"] ":"";s.push(`${t[r]} ${p}x ${t[r+1]} ${F}= ${t[r+2]}`)}return s}initDropdowns(){if(this.recipeConfig&&this.compendium&&this.squareChart){this.demons={"-":[this.blankDemon]},this.skills={"-":[this.blankSkill]},this.learnedBy={"-":[this.blankDemon]};for(const t of this.compendium.allDemons)if(!t.isEnemy&&"party"!==t.fusion&&"enemy"!==t.fusion){this.demons[t.race]||(this.demons[t.race]=[]),this.demons[t.race].push(t);for(const i of Object.keys(t.skills))this.learnedBy[i]||(this.learnedBy[i]=[]),this.learnedBy[i].push(t)}for(const t of this.compendium.allSkills.filter(i=>i.rank<50&&i.learnedBy.length>0))this.skills[t.element]||(this.skills[t.element]=[]),this.skills[t.element].push(t);for(const t of Object.values(this.demons))t.sort((i,s)=>i.lvl-s.lvl);for(const t of Object.values(this.learnedBy))t.sort((i,s)=>i.lvl-s.lvl);for(const t of Object.values(this.skills))t.sort((i,s)=>i.rank-s.rank);this.races=this.recipeConfig.races.filter(t=>this.demons[t]),this.elems=this.recipeConfig.skillElems.filter(t=>this.skills[t]),this.setDemon(this.compendium.getDemon(this.recipeConfig.defaultDemon))}}setDemon(t){const i=[],{inheritElems:s}=this.recipeConfig,r=Object.entries(t.skills).slice(0,this.internalMaxSkills).filter(F=>F[1]<2).map(F=>this.compendium.getSkill(F[0])),p=Object.entries(t.skills).slice(0,this.internalMaxSkills).filter(F=>F[1]<100).map(F=>this.compendium.getSkill(F[0]));for(let F=0;F<s.length;F++)t.inherits&1<<F||i.push(s[s.length-F-1]);this.skills[this.blankSkill.element]=[this.blankSkill].concat(p),this.elems=this.recipeConfig.skillElems.filter(F=>this.skills[F]&&!i.includes(F)),this.form.patchValue({race:t.race,demon:t,ingreds:r.concat(Array(this.internalMaxSkills-r.length).fill(this.blankSkill)).map(F=>({searchSkill:!0,elem:"-",skill:F,race:"-",demon:"-"!==F.name?t:this.blankDemon}))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ge.ok))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-recipe-generator"]],inputs:{maxSkills:"maxSkills",compendium:"compendium",squareChart:"squareChart",recipeConfig:"recipeConfig",lang:"lang"},features:[e.OA$],decls:46,vars:45,consts:[[3,"formGroup"],[1,"entry-table"],["colspan","2",1,"title"],[2,"width","40%"],[2,"width","60%"],["formControlName","race",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","demon",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["formArrayName","ingreds",1,"entry-table"],["colspan","5",1,"title"],[2,"width","20%"],[2,"width","10%"],[2,"width","25%"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","entry-table",4,"ngIf"],[3,"value"],[3,"ngValue"],[3,"formGroupName"],[4,"ngIf"],["formControlName","searchSkill","type","checkbox",3,"change"],["formControlName","elem",3,"change"],["value","-"],["formControlName","skill",3,"change"],["formControlName","demon",4,"ngIf"],["formControlName","demon"],["style","width: 50%",4,"ngIf"],["style","width: 50%","style","padding: 1em; text-align: center;",4,"ngIf"],["colspan","2",2,"padding","1em","text-align","center"],[2,"width","50%"],[4,"ngFor","ngForOf"],[2,"padding","1em","text-align","center"]],template:function(i,s){1&i&&(e.j41(0,"form",0)(1,"h2"),e.EFF(2),e.nI1(3,"translateComp"),e.k0s(),e.j41(4,"table",1)(5,"tr")(6,"th",2),e.EFF(7),e.nI1(8,"translateComp"),e.k0s()(),e.j41(9,"tr")(10,"th",3),e.EFF(11),e.nI1(12,"translateComp"),e.k0s(),e.j41(13,"th",4),e.EFF(14),e.nI1(15,"translateComp"),e.k0s()(),e.j41(16,"tr")(17,"td")(18,"select",5),e.bIt("change",function(){return s.setDemon(s.demons[s.form.controls.race.value][0])}),e.DNE(19,Jn,2,2,"option",6),e.k0s()(),e.j41(20,"td")(21,"select",7),e.bIt("change",function(){return s.setDemon(s.form.controls.demon.value)}),e.DNE(22,Mn,2,2,"option",8),e.k0s()()()(),e.j41(23,"table",9)(24,"tr")(25,"th",10),e.EFF(26),e.nI1(27,"translateComp"),e.k0s()(),e.j41(28,"tr")(29,"th",11),e.EFF(30),e.nI1(31,"translateComp"),e.k0s(),e.j41(32,"th",12),e.EFF(33),e.nI1(34,"translateComp"),e.k0s(),e.j41(35,"th",13),e.EFF(36),e.nI1(37,"translateComp"),e.k0s(),e.j41(38,"th",11),e.EFF(39),e.nI1(40,"translateComp"),e.k0s(),e.j41(41,"th",13),e.EFF(42),e.nI1(43,"translateComp"),e.k0s()(),e.DNE(44,ts,2,2,"ng-container",14),e.k0s(),e.DNE(45,hs,21,18,"table",15),e.k0s()),2&i&&(e.Y8G("formGroup",s.form),e.R7$(2),e.JRh(e.i5U(3,15,s.msgs.RecipeGenerator,s.lang)),e.R7$(5),e.JRh(e.i5U(8,18,s.msgs.Target,s.lang)),e.R7$(4),e.JRh(e.i5U(12,21,s.msgs.Race,s.lang)),e.R7$(3),e.JRh(e.i5U(15,24,s.msgs.Name,s.lang)),e.R7$(5),e.Y8G("ngForOf",s.races),e.R7$(3),e.Y8G("ngForOf",s.demons[s.form.controls.race.value]),e.R7$(4),e.JRh(e.i5U(27,27,s.msgs.IncludeIngredients,s.lang)),e.R7$(4),e.JRh(e.i5U(31,30,s.msgs.FilterBy,s.lang)),e.R7$(3),e.JRh(e.i5U(34,33,s.msgs.Elem,s.lang)),e.R7$(3),e.JRh(e.i5U(37,36,s.msgs.Skill,s.lang)),e.R7$(3),e.JRh(e.i5U(40,39,s.msgs.Race,s.lang)),e.R7$(3),e.JRh(e.i5U(43,42,s.msgs.Ingredient,s.lang)),e.R7$(2),e.Y8G("ngForOf",s.form.controls.ingreds.controls),e.R7$(1),e.Y8G("ngIf",s.recipe))},dependencies:[b.Sq,b.bT,ge.qT,ge.xH,ge.y7,ge.Zm,ge.wz,ge.BC,ge.cb,ge.j4,ge.JD,ge.$R,ge.v8,O.uz],styles:["ul[_ngcontent-%COMP%]{padding:0 1em;list-style:none}td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:25px;width:100%}"],changeDetection:0})}return n})(),ps=(()=>{class n{constructor(t,i){this.fusionDataService=t,this.title=i,this.subscriptions=[],this.maxSkills=8;const s=this.fusionDataService.compConfig;this.recipeConfig={fissionCalculator:this.fusionDataService.fissionCalculator,fusionCalculator:this.fusionDataService.fusionCalculator,races:s.races,skillElems:s.skillElems,inheritElems:s.affinityElems,displayElems:{},restrictInherits:!0,triExclusiveRaces:["Fool","Fortune","Tower","Judgement","Aeon","Jester"],triFissionCalculator:this.fusionDataService.triFissionCalculator,triFusionCalculator:this.fusionDataService.triFusionCalculator,defaultDemon:"Pixie"}}ngOnInit(){this.setTitle(),this.subscribeAll()}ngOnDestroy(){this.unsubscribeAll()}setTitle(){this.title.setTitle(`Recipe Generator - ${this.fusionDataService.appName}`)}subscribeAll(){this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t})),this.subscriptions.push(this.fusionDataService.squareChart.subscribe(t=>{this.squareChart=t}))}unsubscribeAll(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(ve.i),e.rXU(Q.hE))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-recipe-generator-container"]],decls:1,vars:4,consts:[[3,"maxSkills","compendium","squareChart","recipeConfig"]],template:function(i,s){1&i&&e.nrm(0,"app-recipe-generator",0),2&i&&e.Y8G("maxSkills",s.maxSkills)("compendium",s.compendium)("squareChart",s.squareChart)("recipeConfig",s.recipeConfig)},dependencies:[ms],encapsulation:2,changeDetection:0})}return n})();var Le=z(2009);function us(n,o){if(1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s()()),2&n){const t=o.$implicit;e.R7$(2),e.JRh(t)}}let fs=(()=>{class n{ngOnChanges(){if(this.compendium&&this.pairChart&&(this.trioChart||!this.trioCalculator)){const t=[];for(const i of this.compendium.allDemons.filter(s=>!s.isEnemy)){const s=this.compendium.getSpecialNameEntries(i.name);if(s.length>0){t.push(`${i.name} = ${s.join(" x ")}`);continue}const r=this.pairCalculator.getFusions(i.name,this.compendium,this.pairChart).map(F=>Pe(F,this.compendium));if(r.length>0&&(r.filter(F=>F.race1!==i.race).length>0||!this.trioCalculator||0===this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).length)){r.sort((Y,B)=>Y.price-B.price);const F=r.slice(0,3).map(Y=>`${Y.name1} x ${Y.name2}`).join(", ");t.push(`${i.name} = ${F}`+(r.length>3?`, ${r.length-3} more...`:""))}else{if(this.trioCalculator){const F=this.trioCalculator.getFusions(i.name,this.compendium,this.trioChart).map(Y=>ht(Y,this.compendium)).filter(Y=>Y.d1.race!==i.race);if(F.length>0){F.sort((B,J)=>B.price-J.price);const Y=F.slice(0,3).map(B=>`${B.d1.name} x ${B.d2.name} x ${B.d3.name}`).join(", ");t.push(`${i.name} = ${Y}`+(F.length>3?`, ${F.length-3} more...`:""));continue}}t.push(i.prereq?`${i.name} = ${i.prereq}`:`${i.name} = No fusions found!`)}}this.fissionPreviews=t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-fission-preview-table"]],inputs:{pairCalculator:"pairCalculator",trioCalculator:"trioCalculator",pairChart:"pairChart",trioChart:"trioChart",compendium:"compendium"},features:[e.OA$],decls:6,vars:1,consts:[[1,"entry-table"],[1,"title"],[4,"ngFor","ngForOf"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),e.EFF(4,"Fission Previews"),e.k0s()(),e.DNE(5,us,3,1,"tr",2),e.k0s()()),2&i&&(e.R7$(5),e.Y8G("ngForOf",s.fissionPreviews))},dependencies:[b.Sq],encapsulation:2,changeDetection:0})}return n})(),ds=(()=>{class n{constructor(t){this.fusionTrioService=t,this.subscriptions=[]}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.trioCalculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(t=>{this.compendium=t})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(t=>{this.fusionChart=t}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Le.eG))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-trio-fission-preview"]],decls:2,vars:5,consts:[[3,"pairCalculator","trioCalculator","pairChart","trioChart","compendium"]],template:function(i,s){1&i&&(e.j41(0,"app-fission-preview-table",0),e.nrm(1,"app-fission-preview-table"),e.k0s()),2&i&&e.Y8G("pairCalculator",s.pairCalculator)("trioCalculator",s.trioCalculator)("pairChart",s.fusionChart.normalChart)("trioChart",s.fusionChart)("compendium",s.compendium)},dependencies:[fs],encapsulation:2,changeDetection:0})}return n})();function gs(n,o){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"lvlToNumber"),e.k0s(),e.j41(8,"td")(9,"a",3),e.EFF(10),e.k0s()()()),2&n){const t=o.$implicit,i=e.XpG();e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.race1),e.R7$(2),e.JRh(e.bMT(7,6,t.lvl1)),e.R7$(3),e.FCK("routerLink","",i.baseUrl,"/",t.name1,""),e.R7$(1),e.JRh(t.name1)}}let _s=(()=>{class n{constructor(){this.title="Special Fusion Ingredients",this.baseUrl="../..",this.isFusion=!1,this.lang="en",this.msgs=re.cK}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-fusion-entry-table"]],inputs:{title:"title",baseUrl:"baseUrl",rowData:"rowData",isFusion:"isFusion",lang:"lang"},decls:19,vars:15,consts:[[3,"ngClass"],["colspan","4",1,"title"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(i,s){1&i&&(e.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.EFF(4),e.k0s()(),e.j41(5,"tr")(6,"th"),e.EFF(7),e.nI1(8,"translateComp"),e.k0s(),e.j41(9,"th"),e.EFF(10),e.nI1(11,"translateComp"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Lvl"),e.k0s(),e.j41(14,"th"),e.EFF(15),e.nI1(16,"translateComp"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,gs,11,8,"tr",2),e.k0s()()),2&i&&(e.Y8G("ngClass",s.isFusion?"list-table":"entry-table"),e.R7$(4),e.JRh(s.title),e.R7$(3),e.JRh(e.i5U(8,6,s.msgs.Price,s.lang)),e.R7$(3),e.JRh(e.i5U(11,9,s.msgs.Race,s.lang)),e.R7$(5),e.JRh(e.i5U(16,12,s.msgs.Name,s.lang)),e.R7$(3),e.Y8G("ngForOf",s.rowData))},dependencies:[b.YU,b.Sq,Z.Wk,O.uz,O.Z2],encapsulation:2,changeDetection:0})}return n})();const ks=["class","app-fusion-pair-table-row"],Fs=["class","app-fusion-pair-table-header"],Ee=function(n){return["sortable",n]};function Cs(n,o){if(1&n&&(e.j41(0,"tr")(1,"td",8),e.EFF(2),e.nI1(3,"translateComp"),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.JRh(e.i5U(3,1,t.msgs.NoFusionsFound,t.lang))}}function Rs(n,o){if(1&n&&e.nrm(0,"tr",9),2&n){const t=o.$implicit,i=e.XpG();e.Y8G("ngClass",t.notes)("data",t)("leftBaseUrl",i.leftBaseUrl)("rightBaseUrl",i.rightBaseUrl)}}function vs(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",10),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.currRow=s.currRow+s.incrRow)}),e.EFF(2),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(1),e.xc7("height",2,"em"),e.R7$(1),e.Lme(" Show next ",t.incrRow," out of ",t.rowData.length-t.currRow," ")}}let Ds=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tr",8,"app-fusion-pair-table-row"]],inputs:{data:"data",leftBaseUrl:"leftBaseUrl",rightBaseUrl:"rightBaseUrl"},attrs:ks,decls:18,vars:15,consts:[[1,"price"],[3,"routerLink"]],template:function(i,s){1&i&&(e.j41(0,"td",0),e.EFF(1),e.k0s(),e.j41(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"lvlToNumber"),e.k0s(),e.j41(7,"td")(8,"a",1),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"lvlToNumber"),e.k0s(),e.j41(15,"td")(16,"a",1),e.EFF(17),e.k0s()()),2&i&&(e.R7$(1),e.JRh(s.data.price),e.R7$(2),e.JRh(s.data.race1),e.R7$(2),e.JRh(e.bMT(6,11,s.data.lvl1)),e.R7$(3),e.FCK("routerLink","",s.leftBaseUrl,"/",s.data.name1,""),e.R7$(1),e.JRh(s.data.name1),e.R7$(2),e.JRh(s.data.race2),e.R7$(2),e.JRh(e.bMT(14,13,s.data.lvl2)),e.R7$(3),e.FCK("routerLink","",s.rightBaseUrl,"/",s.data.name2,""),e.R7$(1),e.JRh(s.data.name2))},dependencies:[Z.Wk,O.Z2],encapsulation:2,changeDetection:0})}return n})(),bs=(()=>{class n extends $e{constructor(){super(...arguments),this.lang="en",this.msgs=re.cK}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tfoot",8,"app-fusion-pair-table-header"]],inputs:{title:"title",leftHeader:"leftHeader",rightHeader:"rightHeader",lang:"lang"},features:[e.Vt3],attrs:Fs,decls:28,vars:50,consts:[["colspan","7",1,"title"],["rowSpan","2",3,"ngClass","click"],["colspan","3"],[3,"ngClass","click"]],template:function(i,s){1&i&&(e.j41(0,"tr")(1,"th",0),e.EFF(2),e.k0s()(),e.j41(3,"tr")(4,"th",1),e.bIt("click",function(){return s.nextSortFunIndex(1)}),e.EFF(5),e.nI1(6,"translateComp"),e.k0s(),e.j41(7,"th",2),e.EFF(8),e.k0s(),e.j41(9,"th",2),e.EFF(10),e.k0s()(),e.j41(11,"tr")(12,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(2)}),e.EFF(13),e.nI1(14,"translateComp"),e.k0s(),e.j41(15,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(3)}),e.EFF(16,"Lvl"),e.k0s(),e.j41(17,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(4)}),e.EFF(18),e.nI1(19,"translateComp"),e.k0s(),e.j41(20,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(5)}),e.EFF(21),e.nI1(22,"translateComp"),e.k0s(),e.j41(23,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(6)}),e.EFF(24,"Lvl"),e.k0s(),e.j41(25,"th",3),e.bIt("click",function(){return s.nextSortFunIndex(7)}),e.EFF(26),e.nI1(27,"translateComp"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(s.title),e.R7$(2),e.xc7("width",10,"%"),e.Y8G("ngClass",e.eq3(36,Ee,s.sortDirClass(1))),e.R7$(1),e.JRh(e.i5U(6,21,s.msgs.Price,s.lang)),e.R7$(2),e.xc7("width",45,"%"),e.R7$(1),e.JRh(s.leftHeader),e.R7$(1),e.xc7("width",45,"%"),e.R7$(1),e.JRh(s.rightHeader),e.R7$(2),e.Y8G("ngClass",e.eq3(38,Ee,s.sortDirClass(2))),e.R7$(1),e.JRh(e.i5U(14,24,s.msgs.Race,s.lang)),e.R7$(2),e.Y8G("ngClass",e.eq3(40,Ee,s.sortDirClass(3))),e.R7$(2),e.Y8G("ngClass",e.eq3(42,Ee,s.sortDirClass(4))),e.R7$(1),e.JRh(e.i5U(19,27,s.msgs.Name,s.lang)),e.R7$(2),e.Y8G("ngClass",e.eq3(44,Ee,s.sortDirClass(5))),e.R7$(1),e.JRh(e.i5U(22,30,s.msgs.Race,s.lang)),e.R7$(2),e.Y8G("ngClass",e.eq3(46,Ee,s.sortDirClass(6))),e.R7$(2),e.Y8G("ngClass",e.eq3(48,Ee,s.sortDirClass(7))),e.R7$(1),e.JRh(e.i5U(27,33,s.msgs.Name,s.lang)))},dependencies:[b.YU,O.uz],encapsulation:2,changeDetection:0})}return n})(),Lt=(()=>{class n extends ye{constructor(t){super(),this.config=t,this._title="Ingredient 1 x Ingredient 2 = Result",this.leftHeader="Ingredient 1",this.rightHeader="Ingredient 2",this.leftBaseUrl="../..",this.rightBaseUrl="../..",this.initRow=500,this.incrRow=500,this.lang="en",this.msgs=re.cK,this.sortFuns=[],this.currRow=this.initRow;const{raceOrder:i}=t;this.sortFuns=[(s,r)=>s.price-r.price,(s,r)=>s.price-r.price,(s,r)=>100*(i[s.race1]-i[r.race1])+r.lvl1-s.lvl1,(s,r)=>s.lvl1-r.lvl1,(s,r)=>s.name1.localeCompare(r.name1),(s,r)=>100*(i[s.race2]-i[r.race2])+r.lvl2-s.lvl2,(s,r)=>s.lvl2-r.lvl2,(s,r)=>s.name2.localeCompare(r.name2)]}set title(t){this._title=t,this.currRow=this.initRow}get title(){return this._title}getSortFun(t){return this.sortFuns[t]}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Le.HI))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-fusion-pair-table"]],inputs:{leftHeader:"leftHeader",rightHeader:"rightHeader",leftBaseUrl:"leftBaseUrl",rightBaseUrl:"rightBaseUrl",initRow:"initRow",incrRow:"incrRow",lang:"lang",title:"title"},features:[e.Jv_([ue]),e.Vt3],decls:11,vars:14,consts:[["appPositionSticky","",1,"list-table"],["appColumnWidths","",1,"app-fusion-pair-table-header",3,"lang","title","leftHeader","rightHeader","sortFunIndex","sortFunIndexChanged"],["stickyHeader",""],[1,"list-table"],["appColumnWidths","",1,"app-fusion-pair-table-header",3,"lang","title","leftHeader","rightHeader"],["hiddenHeader",""],[4,"ngIf"],["class","app-fusion-pair-table-row",3,"ngClass","data","leftBaseUrl","rightBaseUrl",4,"ngFor","ngForOf"],["colspan","7"],[1,"app-fusion-pair-table-row",3,"ngClass","data","leftBaseUrl","rightBaseUrl"],["colspan","7",1,"nav",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"div")(1,"table",0)(2,"tfoot",1,2),e.bIt("sortFunIndexChanged",function(p){return s.sortFunIndex=p}),e.k0s()(),e.j41(4,"table",3),e.nrm(5,"tfoot",4,5),e.j41(7,"tbody"),e.DNE(8,Cs,4,4,"tr",6),e.DNE(9,Rs,1,4,"tr",7),e.DNE(10,vs,3,4,"tr",6),e.k0s()()()),2&i&&(e.R7$(2),e.Y8G("lang",s.lang)("title",s.title)("leftHeader",s.leftHeader)("rightHeader",s.rightHeader)("sortFunIndex",s.sortFunIndex),e.R7$(3),e.xc7("visibility","collapse"),e.Y8G("lang",s.lang)("title",s.title)("leftHeader",s.leftHeader)("rightHeader",s.rightHeader),e.R7$(3),e.Y8G("ngIf",!s.rowData.length),e.R7$(1),e.Y8G("ngForOf",s.rowData.slice(0,s.currRow)),e.R7$(1),e.Y8G("ngIf",s.currRow<s.rowData.length))},dependencies:[b.YU,b.Sq,b.bT,oe,de,bs,Ds,O.uz],encapsulation:2,changeDetection:0})}return n})();function Is(n,o){if(1&n&&(e.j41(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e.EFF(4),e.nI1(5,"translateComp"),e.k0s()()(),e.j41(6,"tbody")(7,"tr")(8,"td"),e.EFF(9),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(4),e.JRh(e.i5U(5,2,t.msgs.SpecialFusionCondition,t.lang)),e.R7$(5),e.JRh(t.fusionPrereq)}}function Ts(n,o){if(1&n&&(e.nrm(0,"app-fusion-entry-table",5),e.nI1(1,"translateComp")),2&n){const t=e.XpG();e.Y8G("lang",t.lang)("title",e.i5U(1,4,t.msgs.SpecialFusionIngredients,t.lang)+t.currentDemon)("rowData",t.fusionEntries)("isFusion",!0)}}function Ls(n,o){if(1&n&&(e.nrm(0,"app-fusion-pair-table",6),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&n){const t=e.XpG();e.Y8G("lang",t.lang)("title",e.i5U(1,5,t.msgs.Title,t.lang)+t.currentDemon)("leftHeader",e.i5U(2,8,t.msgs.LeftHeader,t.lang))("rightHeader",e.i5U(3,11,t.msgs.RightHeader,t.lang))("rowData",t.fusionPairs)}}let Es=(()=>{class n{constructor(t,i,s){this.currentDemonService=t,this.changeDetectorRef=i,this.fusionDataService=s,this.fusionPrereq="",this.lang="en",this.fusionEntries=[],this.fusionPairs=[],this.msgs=re.JG,this.subscriptions=[],this.toFusionEntry=r=>p=>function xn(n,o){const t=o.getDemon(n);return{price:t.price,race1:t.race,lvl1:t.currLvl,name1:n}}(p,this.compendium),this.toFusionPair=r=>p=>Pe(p,this.compendium)}ngOnInit(){this.calculator=this.fusionDataService.fissionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getForwardFusions()})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(t=>{this.fusionChart=t,this.getForwardFusions()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.currentDemon=t,this.getForwardFusions()}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}getForwardFusions(){this.compendium&&this.fusionChart&&this.currentDemon&&(this.changeDetectorRef.markForCheck(),this.lang=this.currentDemon.charCodeAt(0)<256?"en":"ja",this.fusionPrereq=this.compendium.getDemon(this.currentDemon).prereq,this.fusionEntries=this.compendium.getSpecialNameEntries(this.currentDemon).map(this.toFusionEntry(this.currentDemon)),this.fusionPairs=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon)))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(we.i),e.rXU(e.gRc),e.rXU(Le.iJ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-smt-fission-table"]],decls:3,vars:3,consts:[["class","list-table",4,"ngIf"],[3,"lang","title","rowData","isFusion",4,"ngIf"],[3,"lang","title","leftHeader","rightHeader","rowData",4,"ngIf"],[1,"list-table"],[1,"title"],[3,"lang","title","rowData","isFusion"],[3,"lang","title","leftHeader","rightHeader","rowData"]],template:function(i,s){1&i&&(e.DNE(0,Is,10,5,"table",0),e.DNE(1,Ts,2,7,"app-fusion-entry-table",1),e.DNE(2,Ls,4,14,"app-fusion-pair-table",2)),2&i&&(e.Y8G("ngIf",s.fusionPrereq),e.R7$(1),e.Y8G("ngIf",s.fusionEntries.length),e.R7$(1),e.Y8G("ngIf",s.fusionPairs.length||!s.fusionEntries.length))},dependencies:[b.bT,_s,Lt,O.uz],encapsulation:2,changeDetection:0})}return n})(),Ss=(()=>{class n{constructor(t,i,s){this.currentDemonService=t,this.changeDetectorRef=i,this.fusionDataService=s,this.lang="en",this.fusionPairs=[],this.msgs=re.y4,this.subscriptions=[],this.toFusionPair=r=>p=>ct(p,this.compendium)}ngOnInit(){this.calculator=this.fusionDataService.fusionCalculator,this.subscriptions.push(this.fusionDataService.compendium.subscribe(t=>{this.compendium=t,this.getForwardFusions()})),this.subscriptions.push(this.fusionDataService.fusionChart.subscribe(t=>{this.fusionChart=t,this.getForwardFusions()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.currentDemon=t,this.getForwardFusions()}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}getForwardFusions(){this.compendium&&this.fusionChart&&this.currentDemon&&(this.changeDetectorRef.markForCheck(),this.lang=this.currentDemon.charCodeAt(0)<256?"en":"ja",this.fusionPairs=this.calculator.getFusions(this.currentDemon,this.compendium,this.fusionChart).map(this.toFusionPair(this.currentDemon)))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(we.i),e.rXU(e.gRc),e.rXU(Le.iJ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-smt-fusion-table"]],decls:4,vars:14,consts:[[3,"lang","title","leftHeader","rightHeader","rowData"]],template:function(i,s){1&i&&(e.nrm(0,"app-fusion-pair-table",0),e.nI1(1,"translateComp"),e.nI1(2,"translateComp"),e.nI1(3,"translateComp")),2&i&&e.Y8G("lang",s.lang)("title",s.currentDemon+e.i5U(1,5,s.msgs.Title,s.lang))("leftHeader",e.i5U(2,8,s.msgs.LeftHeader,s.lang))("rightHeader",e.i5U(3,11,s.msgs.RightHeader,s.lang))("rowData",s.fusionPairs)},dependencies:[Lt,O.uz],encapsulation:2,changeDetection:0})}return n})();const $s=["class","app-fusion-trio-table-row"];function ys(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",1),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.toggleShowing.emit(s.showIndex))}),e.EFF(2," Show "),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"a",2),e.EFF(11),e.k0s()(),e.j41(12,"td",3),e.EFF(13),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(1),e.xc7("height",1,"em"),e.R7$(3),e.JRh(t.trio.minPrice),e.R7$(2),e.JRh(t.trio.demon.race),e.R7$(2),e.JRh(t.trio.demon.currLvl),e.R7$(2),e.FCK("routerLink","",t.baseUrl,"/",t.trio.demon.name,""),e.R7$(1),e.JRh(t.trio.demon.name),e.R7$(1),e.xc7("color","#666"),e.R7$(1),e.SpI("",t.trio.fusions.length," recipes hidden")}}function Gs(n,o){if(1&n&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"a",2),e.EFF(7),e.k0s()(),e.bVm()),2&n){const t=e.XpG().$implicit,i=e.XpG(3);e.R7$(2),e.JRh(t.race),e.R7$(2),e.JRh(t.currLvl),e.R7$(2),e.FCK("routerLink","",i.baseUrl,"/",t.name,""),e.R7$(1),e.JRh(t.name)}}function js(n,o){if(1&n&&(e.qex(0),e.DNE(1,Gs,8,5,"ng-container",0),e.bVm()),2&n){const t=o.$implicit,i=e.XpG(3);e.R7$(1),e.Y8G("ngIf",i.trio.demon!==t)}}const Os=function(n,o,t){return[n,o,t]};function ws(n,o){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"a",2),e.EFF(9),e.k0s()(),e.DNE(10,js,2,1,"ng-container",5),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(i.trio.demon.race),e.R7$(2),e.JRh(i.trio.demon.currLvl),e.R7$(2),e.FCK("routerLink","",i.baseUrl,"/",i.trio.demon.name,""),e.R7$(1),e.JRh(i.trio.demon.name),e.R7$(1),e.Y8G("ngForOf",e.sMw(7,Os,t.d1,t.d2,t.d3))}}function Ns(n,o){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"tr")(2,"th",4),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.toggleShowing.emit(s.showIndex))}),e.EFF(3," Hide "),e.k0s()(),e.DNE(4,ws,11,11,"tr",5),e.bVm()}if(2&n){const t=e.XpG();e.R7$(2),e.xc7("height",1,"em"),e.BMQ("rowspan",t.trio.fusions.length+1),e.R7$(2),e.Y8G("ngForOf",t.trio.fusions)}}const Hs=["class","app-fusion-trio-table-header"],Me=function(n){return["sortable",n]};function Ys(n,o){1&n&&(e.j41(0,"tbody")(1,"tr")(2,"td",8),e.EFF(3,"No fusions found!"),e.k0s()()())}function Us(n,o){if(1&n){const t=e.RV6();e.j41(0,"tbody",9),e.bIt("toggleShowing",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleShowing(s))}),e.k0s()}if(2&n){const t=o.$implicit,i=o.index,s=e.XpG();e.Y8G("trio",t)("showing",s.showing[i])("showIndex",i)}}let xs=(()=>{class n{constructor(){this.baseUrl="../../..",this.toggleShowing=new e.bkB}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tbody",8,"app-fusion-trio-table-row"]],inputs:{trio:"trio",showing:"showing",showIndex:"showIndex",baseUrl:"baseUrl"},outputs:{toggleShowing:"toggleShowing"},attrs:$s,decls:2,vars:2,consts:[[4,"ngIf"],[1,"nav",3,"click"],[3,"routerLink"],["colspan","6"],[1,"nav","active",3,"click"],[4,"ngFor","ngForOf"]],template:function(i,s){1&i&&(e.DNE(0,ys,14,11,"tr",0),e.DNE(1,Ns,5,4,"ng-container",0)),2&i&&(e.Y8G("ngIf",!s.showing),e.R7$(1),e.Y8G("ngIf",s.showing))},dependencies:[b.Sq,b.bT,Z.Wk],encapsulation:2,changeDetection:0})}return n})(),As=(()=>{class n extends $e{constructor(){super(...arguments),this.hideAll=new e.bkB}toggleHideAll(){this.hideAll.emit(!0)}static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}}();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["tfoot",8,"app-fusion-trio-table-header"]],inputs:{title:"title",leftHeader:"leftHeader"},outputs:{hideAll:"hideAll"},features:[e.Vt3],attrs:Hs,decls:35,vars:24,consts:[["colspan","11",1,"title"],["rowspan","2",1,"sortable",3,"click"],["rowSpan","2",3,"ngClass","click"],["colspan","3"],[3,"ngClass","click"]],template:function(i,s){1&i&&(e.j41(0,"tr")(1,"th",0),e.EFF(2),e.k0s()(),e.j41(3,"tr")(4,"th",1),e.bIt("click",function(){return s.toggleHideAll()}),e.EFF(5,"Hide All"),e.k0s(),e.j41(6,"th",2),e.bIt("click",function(){return s.nextSortFunIndex(1)}),e.EFF(7,"Price"),e.k0s(),e.j41(8,"th",3),e.EFF(9),e.k0s(),e.j41(10,"th",3),e.EFF(11,"Ingredient 2"),e.k0s(),e.j41(12,"th",3),e.EFF(13,"Ingredient 3"),e.k0s()(),e.j41(14,"tr")(15,"th",4),e.bIt("click",function(){return s.nextSortFunIndex(2)}),e.EFF(16,"Race"),e.k0s(),e.j41(17,"th",4),e.bIt("click",function(){return s.nextSortFunIndex(3)}),e.EFF(18,"Lvl"),e.j41(19,"span"),e.EFF(20,"--"),e.k0s()(),e.j41(21,"th",4),e.bIt("click",function(){return s.nextSortFunIndex(4)}),e.EFF(22,"Name"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Race"),e.k0s(),e.j41(25,"th"),e.EFF(26,"Lvl"),e.k0s(),e.j41(27,"th"),e.EFF(28,"Name"),e.k0s(),e.j41(29,"th"),e.EFF(30,"Race"),e.k0s(),e.j41(31,"th"),e.EFF(32,"Lvl"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Name"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(s.title),e.R7$(2),e.xc7("width",8,"%"),e.R7$(2),e.xc7("width",8,"%"),e.Y8G("ngClass",e.eq3(16,Me,s.sortDirClass(1))),e.R7$(2),e.xc7("width",28,"%"),e.R7$(1),e.JRh(s.leftHeader),e.R7$(1),e.xc7("width",28,"%"),e.R7$(2),e.xc7("width",28,"%"),e.R7$(3),e.Y8G("ngClass",e.eq3(18,Me,s.sortDirClass(2))),e.R7$(2),e.Y8G("ngClass",e.eq3(20,Me,s.sortDirClass(3))),e.R7$(4),e.Y8G("ngClass",e.eq3(22,Me,s.sortDirClass(4))))},dependencies:[b.YU],styles:["span[_ngcontent-%COMP%]{color:transparent}"],changeDetection:0})}return n})(),Et=(()=>{class n extends ye{constructor(t){super(),this.changeDetector=t,this.title="Fusion Trio Table",this.leftHeader="Ingredient 1",this.showing=[],this.sortFuns=[]}ngOnInit(){this.nextSortFuns()}ngAfterViewChecked(){this.matchColWidths()}toggleShowing(t){this.showing[t]=!this.showing[t]}toggleHideAll(){for(let t=0;t<this.showing.length;t++)this.showing[t]=!1}nextSortFuns(){this.sortFuns=[],this.raceOrder&&(this.sortFuns.push((t,i)=>t.minPrice-i.minPrice,(t,i)=>t.minPrice-i.minPrice,(t,i)=>200*(this.raceOrder[t.demon.race]-this.raceOrder[i.demon.race])+t.demon.currLvl-i.demon.currLvl,(t,i)=>t.demon.currLvl-i.demon.currLvl,(t,i)=>t.demon.name.localeCompare(i.demon.name)),this.sort())}getSortFun(t){return this.sortFuns[t]}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-fusion-trio-table"]],inputs:{title:"title",leftHeader:"leftHeader",raceOrder:"raceOrder"},features:[e.Jv_([ue]),e.Vt3],decls:9,vars:9,consts:[["appPositionSticky","",1,"list-table"],["appColumnWidths","",1,"app-fusion-trio-table-header",3,"title","leftHeader","sortFunIndex","hideAll","sortFunIndexChanged"],["stickyHeader",""],[1,"list-table"],["appColumnWidths","",1,"app-fusion-trio-table-header",3,"title","leftHeader"],["hiddenHeader",""],[4,"ngIf"],["class","app-fusion-trio-table-row",3,"trio","showing","showIndex","toggleShowing",4,"ngFor","ngForOf"],["colspan","11"],[1,"app-fusion-trio-table-row",3,"trio","showing","showIndex","toggleShowing"]],template:function(i,s){1&i&&(e.j41(0,"div")(1,"table",0)(2,"tfoot",1,2),e.bIt("hideAll",function(){return s.toggleHideAll()})("sortFunIndexChanged",function(p){return s.sortFunIndex=p}),e.k0s()(),e.j41(4,"table",3),e.nrm(5,"tfoot",4,5),e.DNE(7,Ys,4,0,"tbody",6),e.DNE(8,Us,1,3,"tbody",7),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("title",s.title)("leftHeader",s.leftHeader)("sortFunIndex",s.sortFunIndex),e.R7$(3),e.xc7("visibility","collapse"),e.Y8G("title",s.title)("leftHeader",s.leftHeader),e.R7$(2),e.Y8G("ngIf",!s.rowData.length),e.R7$(1),e.Y8G("ngForOf",s.rowData))},dependencies:[b.Sq,b.bT,oe,de,As,xs],encapsulation:2,changeDetection:0})}return n})(),Bs=(()=>{class n{constructor(t,i,s,r){this.route=t,this.currentDemonService=i,this.changeDetectorRef=s,this.fusionTrioService=r,this.subscriptions=[],this.fissionTrios=[],this.toDemonTrio=p=>ht(p,this.compendium),this.sortDemonTrio=(p,F)=>p.price-F.price}ngOnInit(){this.pairCalculator=this.fusionTrioService.fissionCalculator,this.calculator=this.fusionTrioService.triFissionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(t=>{this.compendium=t,this.checkFissions()})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(t=>{this.chart=t,this.checkFissions()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.currentDemon=t,this.checkFissions()}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}checkFissions(){this.compendium&&this.chart&&this.currentDemon&&(this.changeDetectorRef.markForCheck(),this.getFissions())}getFissions(){const i=this.calculator.getFusions(this.currentDemon,this.compendium,this.chart).map(this.toDemonTrio),s={};for(const r of i)for(const p of[r.d1.name,r.d2.name,r.d3.name])s[p]||(s[p]=[]),s[p].push(r);for(const r of Object.values(s))r.sort(this.sortDemonTrio);this.fissionTrios=Object.entries(s).map(r=>({demon:this.compendium.getDemon(r[0]),minPrice:r[1][0].price,fusions:r[1]}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Z.nX),e.rXU(we.i),e.rXU(e.gRc),e.rXU(Le.eG))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-triple-fission-table"]],decls:1,vars:3,consts:[[3,"title","raceOrder","rowData"]],template:function(i,s){1&i&&e.nrm(0,"app-fusion-trio-table",0),2&i&&e.Y8G("title","Ingredient 1 x Ingredient 2 x Ingredient 3 = "+s.currentDemon)("raceOrder",s.chart.raceOrder)("rowData",s.fissionTrios)},dependencies:[Et],encapsulation:2,changeDetection:0})}return n})(),Xs=(()=>{class n{constructor(t,i,s,r){this.route=t,this.currentDemonService=i,this.changeDetectorRef=s,this.fusionTrioService=r,this.subscriptions=[],this.fusionTrios=[],this.toDemonTrio=p=>function An(n,o){const t=o.getDemon(n.name1),i=o.getDemon(n.name2),s=o.getDemon(n.name3);return{price:t.price+i.price,d1:t,d2:i,d3:s}}(p,this.compendium),this.sortDemonTrio=(p,F)=>p.price-F.price}ngOnInit(){this.pairCalculator=this.fusionTrioService.fusionCalculator,this.calculator=this.fusionTrioService.triFusionCalculator,this.subscriptions.push(this.fusionTrioService.compendium.subscribe(t=>{this.compendium=t,this.checkFusions()})),this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(t=>{this.chart=t,this.checkFusions()})),this.subscriptions.push(this.currentDemonService.currentDemon.subscribe(t=>{this.currentDemon=t,this.checkFusions()}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}checkFusions(){this.compendium&&this.chart&&this.currentDemon&&(this.changeDetectorRef.markForCheck(),this.getFusions())}getFusions(){const i=this.calculator.getFusions(this.currentDemon,this.compendium,this.chart).map(this.toDemonTrio),s={};for(const r of i)s[r.d3.name]||(s[r.d3.name]=[]),s[r.d3.name].push(r);for(const r of Object.values(s))r.sort(this.sortDemonTrio);this.fusionTrios=Object.entries(s).map(r=>({demon:this.compendium.getDemon(r[0]),minPrice:r[1][0].price,fusions:r[1]}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(Z.nX),e.rXU(we.i),e.rXU(e.gRc),e.rXU(Le.eG))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-triple-fusion-table"]],decls:1,vars:4,consts:[[3,"title","raceOrder","leftHeader","rowData"]],template:function(i,s){1&i&&e.nrm(0,"app-fusion-trio-table",0),2&i&&e.Y8G("title","Result = Lvl "+s.compendium.getDemon(s.currentDemon).currLvl+" "+s.currentDemon+" x Ingredient 2 x Ingredient 3")("raceOrder",s.chart.raceOrder)("leftHeader","Result")("rowData",s.fusionTrios)},dependencies:[Et],encapsulation:2,changeDetection:0})}return n})();var St=z(2755);function Ps(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,i=e.XpG();e.R7$(1),e.JRh(t.slice(0,i.nameCut))}}function Js(n,o){if(1&n&&(e.j41(0,"td",4),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,i=e.XpG(2);e.Y8G("ngClass",t.slice(0,4)),e.R7$(1),e.JRh(t.slice(4,i.nameCut+4))}}function Ms(n,o){if(1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.DNE(3,Js,2,2,"td",3),e.j41(4,"th"),e.EFF(5),e.k0s()()),2&n){const t=o.$implicit;e.R7$(2),e.JRh(t[0]),e.R7$(1),e.Y8G("ngForOf",t.slice(1,t.length-1)),e.R7$(2),e.JRh(t[t.length-1])}}function Vs(n,o){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,i=e.XpG();e.R7$(1),e.JRh(t.slice(0,i.nameCut))}}function Ws(n,o){if(1&n&&(e.j41(0,"tr")(1,"th",0),e.EFF(2),e.k0s()()),2&n){const t=e.XpG();e.R7$(1),e.BMQ("colspan",t.table[0].length),e.R7$(1),e.Lme("",t.appName," ",t.tripTitle,"")}}class Ne{static#e=this.RESULT_COLORS=Object.entries({oran:["-2","Erthys","Gnome","Saki","Saki Mitama","Random","\u30a2\u30fc\u30b7\u30fc\u30ba","\u30ce\u30fc\u30e0","\u30b5\u30ad\u30df\u30bf\u30de"],redd:["-1","Flaemis","Salamander","Ara ","Ara Mitama","Fiend","\u30d5\u30ec\u30a4\u30df\u30fc\u30ba","\u30b5\u30e9\u30de\u30f3\u30c0\u30fc","\u30a2\u30e9\u30df\u30bf\u30de"],gree:["1","Aeros","Sylph","Kusi","Kusi Mitama","UMA","\u30a8\u30a2\u30ed\u30b9","\u30b7\u30eb\u30ad\u30fc","\u30af\u30b7\u30df\u30bf\u30de"],blue:["2","Aquans","Undine","Nigi","Nigi Mitama","Enigma","\u30a2\u30af\u30a2\u30f3\u30ba","\u30a6\u30f3\u30c7\u30a3\u30fc\u30cd","\u30cb\u30ae\u30df\u30bf\u30de"]});constructor(o,t){this.title2=o,this.route=t,this.normTitle="Normal Fusions",this.tripTitle="",this.isPersona=!1,this.filterDarks=!0,this.lang="en",this.msgs=re.qh,this.subscriptions=[],this.table=[],this.nameCut=4}ngOnInit(){this.subscriptions.push(this.route.parent.data.subscribe(o=>{this.appName=o.appName||"Shin Megami Tensei",this.nameCut=parseInt((0,St.oO)(this.msgs.NameCut,o.lang)),this.title2.setTitle((0,St.oO)(this.msgs.AppTitle,o.lang).replace("$APP",this.appName))}))}ngOnChanges(){this.normChart&&this.fillFusionChart()}ngOnDestroy(){for(const o of this.subscriptions)o.unsubscribe()}fillFusionChart(){const o="noneNone",i=Ne.RESULT_COLORS.reduce((j,[te,K])=>K.reduce((U,ke)=>(U[ke]=te,U),j),{}),s=this.normChart.elementDemons;let r=[],p=this.normChart.races,F=[];this.filterDarks&&(r=this.normChart.races.filter(j=>this.normChart.getLightDark(j)>0),p=this.normChart.races.filter(j=>0===this.normChart.getLightDark(j)),F=this.normChart.races.filter(j=>-1===this.normChart.getLightDark(j)),0===F.length&&r.length>0&&(r=this.normChart.races.filter(j=>this.normChart.getLightDark(j)>-1),p=[],F=this.normChart.races.filter(j=>this.normChart.getLightDark(j)<-1)));const Y=r.length-F.length,B=r.concat(p,s),J=F.length?F.concat(Array(B.length-F.length).fill("")):B,M=this.mitaTable?B:r.concat(p,Array(s.length).fill("")),x=this.mitaTable||F.length?Array(Y).fill("").concat(F,p,s):B;this.table=[[""].concat(B,[""])];for(let j=0;j<x.length;j++){const te=Array(B.length+2).fill("empt-"),K=x[j],U=M[j],ke=-1!==s.indexOf(K),He=-1!==s.indexOf(U);this.table.push(te),te[0]=K,te[te.length-1]=U;for(let se=j;se<B.length;se++){const me=B[se],le=-1!==s.indexOf(me);if(le&&He){const Fe=s.indexOf(U),Ve=s.indexOf(me),be=this.mitaTable[Fe][Ve-Fe-1];te[se+1]=be?(i[be]||"norm")+be:o}else if(le&&U){const Fe=this.normChart.getElemFusions(me)[U];te[se+1]=Fe?(i[Fe]||"rank")+(Fe>0?"+":"")+Fe.toString():o}else if(me&&U){const Fe=this.isPersona&&me===U?me:this.normChart.getRaceFusion(me,U);te[se+1]=Fe?(i[Fe]||(me===U?"elem":"norm"))+Fe:o}}if(this.tripChart)for(let se=0;se<=j-Y;se++){const me=J[se];if(me&&ke){const le=this.tripChart.getElemFusions(K)[me];te[se+1]=le?(i[le]||"rank")+(le>0?"+":"")+le.toString():o}else if(me&&K){const le=this.tripChart.getRaceFusion(me,K);te[se+1]=le?(i[le]||(me===K?"elem":"trip"))+le:o}}if(-1!==K.indexOf(" x ")){const[se,me]=K.split(" x "),le=se.slice(0,3)+"x"+me.slice(0,3);te[0]=le,te[te.length-1]=le}else if(-1!==K.indexOf(" ")){const se=K.split(" ")[0];te[0]=se,te[te.length-1]=se}}for(let j=0;j<this.table[0].length;j++){const te=this.table[0][j];if(-1!==te.indexOf(" x ")){const[K,U]=te.split(" x ");this.table[0][j]=K.slice(0,2)+U.slice(0,2)}}this.table.push([""].concat(J,[""]))}static#t=this.\u0275fac=function(t){return new(t||Ne)(e.rXU(Q.hE),e.rXU(Z.nX))};static#n=this.\u0275cmp=e.VBU({type:Ne,selectors:[["app-fusion-chart"]],inputs:{normChart:"normChart",tripChart:"tripChart",mitaTable:"mitaTable",normTitle:"normTitle",tripTitle:"tripTitle",isPersona:"isPersona",filterDarks:"filterDarks",lang:"lang",counter:"counter"},features:[e.OA$],decls:12,vars:7,consts:[[1,"title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,i){1&t&&(e.j41(0,"table")(1,"tbody")(2,"tr")(3,"th",0),e.EFF(4),e.k0s()(),e.j41(5,"tr"),e.DNE(6,Ps,2,1,"th",1),e.k0s(),e.DNE(7,Ms,6,3,"tr",1),e.j41(8,"tr"),e.DNE(9,Vs,2,1,"th",1),e.k0s(),e.DNE(10,Ws,3,3,"tr",2),e.k0s(),e.nrm(11,"tbody"),e.k0s()),2&t&&(e.R7$(3),e.BMQ("colspan",i.table[0].length),e.R7$(1),e.Lme("",i.appName," ",i.normTitle,""),e.R7$(2),e.Y8G("ngForOf",i.table[0]),e.R7$(1),e.Y8G("ngForOf",i.table.slice(1,i.table.length-1)),e.R7$(2),e.Y8G("ngForOf",i.table[i.table.length-1]),e.R7$(1),e.Y8G("ngIf",i.tripTitle))},dependencies:[b.YU,b.Sq,b.bT],styles:["table[_ngcontent-%COMP%]{width:auto;margin:0 auto;white-space:nowrap}td.elem[_ngcontent-%COMP%]{color:#0f0}td.trip[_ngcontent-%COMP%]{color:#d3d3d3}td.oran[_ngcontent-%COMP%]{color:orange}td.redd[_ngcontent-%COMP%]{color:red}td.gree[_ngcontent-%COMP%]{color:#0f0}td.blue[_ngcontent-%COMP%]{color:#0ff}td.none[_ngcontent-%COMP%]{color:transparent}td.empt[_ngcontent-%COMP%]{background-color:transparent;color:transparent}"],changeDetection:0})}const qs=[{path:"",redirectTo:"personas",pathMatch:"full"},{path:"",component:X,data:{fusionTool:"chart"},children:[{path:"chart",component:(()=>{class n{constructor(t,i){this.changeDetectorRef=t,this.fusionTrioService=i,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.fusionTrioService.squareChart.subscribe(t=>{this.normChart=t.normalChart,this.tripChart=t.tripleChart}))}ngOnDestroy(){for(const t of this.subscriptions)t.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.gRc),e.rXU(Le.eG))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-triple-fusion-chart"]],decls:1,vars:4,consts:[[3,"normChart","tripChart","normTitle","tripTitle"]],template:function(i,s){1&i&&e.nrm(0,"app-fusion-chart",0),2&i&&e.Y8G("normChart",s.normChart)("tripChart",s.tripChart)("normTitle","Normal Fusions")("tripTitle","Triple Fusions")},dependencies:[Ne],encapsulation:2,changeDetection:0})}return n})()}]},{path:"",component:X,children:[{path:"shadows/:demonName",component:bt},{path:"personas/:demonName",component:bt,children:[{path:"fissions/triple",component:Bs},{path:"fusions/triple",component:Xs},{path:"fissions",component:Es},{path:"fusions",component:Ss},{path:"**",redirectTo:"fissions",pathMatch:"full"}]},{path:"personas",component:G},{path:"shadows",component:G,data:{showShadows:!0}},{path:"skills",component:Ut},{path:"recipes",component:ps},{path:"previews",component:ds}]},{path:"**",redirectTo:"personas",pathMatch:"full"}];let Qs=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[Z.iI.forChild(qs),Z.iI]})}return n})()},7814:(Ke,Ie,z)=>{z.d(Ie,{i:()=>re});var Z=z(4412);class e{constructor(S){this.compConfig=S,this.specialRecipes={},this.initImportedData(),this.updateDerivedData()}initImportedData(){const S={},L={},w={},N={},$={},T={},W={},ee={},pe="-".repeat(this.compConfig.ailmentElems.length);for(const[X,q]of Object.entries(this.compConfig.resistCodes))W[X]=(q/1e4|0)<<10,ee[X]=q%1e4/2.5|0;const fe=(X,q,R)=>(X||q).split("").map((Q,de)=>W[Q]+(R?.[de]/2.5|0||ee[Q]));for(const X of this.compConfig.demonData)for(const[q,R]of Object.entries(X))S[q]={name:q,race:R.race,lvl:R.lvl,currLvl:R.lvl,cardLvl:R.cardlvl||0,price:Math.pow(R.stats.reduce((Q,de)=>de+Q,0),2)+2e3,inherits:parseInt((R.affinities||[0]).map(Q=>Q>0?1:0).join(""),2),affinities:R.affinities,stats:R.stats,resists:fe(R.resists,R.resists,R.resmods),ailments:fe(R.ailments,pe,R.ailmods),skills:R.skills,fusion:R.fusion||"normal",prereq:R.prereq||""};for(const X of this.compConfig.enemyData)for(const[q,R]of Object.entries(X)){let Q=[];R.material&&"-"!==R.material&&Q.push(R.material),R.gem&&"-"!==R.gem&&Q.push(R.gem),R.drops&&(Q=Q.concat(R.drops)),Q.length||Q.push("-"),L[q]={name:q,race:R.race,lvl:R.lvl,currLvl:R.lvl,cardLvl:0,price:0,inherits:0,stats:R.stats.slice(0,2),estats:R.stats.slice(2),resists:fe(R.resists,R.resists,R.resmods),ailments:fe(R.ailments,pe,R.ailmods),skills:R.skills.reduce((de,Oe)=>(de[Oe]=0,de),{}),fusion:"normal",area:R.area,drop:Q.join(", "),isEnemy:!0}}for(const X of this.compConfig.skillData)for(const[q,R]of Object.entries(X))w[q]={name:q,element:R.element,cost:R.cost||0,rank:R.rank||99,effect:R.power?"\u221a"+R.power+" power"+(R.effect?", "+R.effect:""):R.effect,target:R.target||"Self",learnedBy:[],transfer:[],level:0},R.card&&(w[q].transfer=R.card.split(", ").map(Q=>({demon:Q,level:S[Q]?S[Q].cardLvl:-100})));for(const[X,q]of Object.entries(this.compConfig.specialRecipes)){const R=q;if(N[X]=R,S[X].fusion="special",2===R.length)for(const Q of R)T[Q]||(T[Q]=[]),T[Q].push(X)}for(const X of this.compConfig.races)$[X]={};for(const X of Object.values(S).sort((q,R)=>q.lvl-R.lvl)){"party"!==X.fusion&&($[X.race][X.lvl]=X.name);for(const[q,R]of Object.entries(X.skills))w[q].learnedBy.push({demon:X.name,level:R})}this.demons=S,this.enemies=L,this.skills=w,this.specialRecipes=N,this.invertedDemons=$,this.invertedSpecials=T}updateDerivedData(){const S={},L={},w=[];for(const T of Object.values(this.skills))T.learnedBy.length<1?T.rank=99:w.push(T);for(const T of this.compConfig.races)S[T]=[],L[T]=[];for(const[T,W]of Object.entries(this.demons))"party"!==W.fusion&&(S[W.race].push(W.lvl),this.specialRecipes.hasOwnProperty(T)||L[W.race].push(W.lvl));for(const T of this.compConfig.races)S[T].sort((W,ee)=>W-ee),L[T].sort((W,ee)=>W-ee);const N=Object.keys(this.demons).map(T=>this.demons[T]),$=Object.keys(this.enemies).map(T=>this.enemies[T]);this._allDemons=$.concat(N),this._allSkills=w,this.allIngredients=S,this.allResults=L}get allDemons(){return this._allDemons}get allSkills(){return this._allSkills}get specialDemons(){return Object.keys(this.specialRecipes).map(S=>this.demons[S])}getDemon(S){return this.demons[S]||this.enemies[S]}getSkill(S){return this.skills[S]}getSkills(S){const L=this.compConfig.elemOrder,w=S.map(N=>this.skills[N]);return w.sort((N,$)=>1e4*(L[N.element]-L[$.element])+N.rank-$.rank),w}getIngredientDemonLvls(S){return this.allIngredients[S]||[]}getResultDemonLvls(S){return this.allResults[S]||[]}getSpecialNameEntries(S){return this.specialRecipes[S]||[]}getSpecialNamePairs(S){return[]}reverseLookupDemon(S,L){return this.invertedDemons[S][L]}reverseLookupSpecial(S){return this.invertedSpecials[S]||[]}isElementDemon(S){return!1}updateFusionSettings(S){}}let ve=(()=>{class O{static#e=this.LIGHT_RACES=["Herald","Megami","Avian","Tree","Deity","Avatar","Holy","Genma","Fury","Lady","Dragon","Kishin","Enigma","Geist","Entity","Amatsu","Kunitsu","Godly","Chaos"];static#t=this.DARK_RACES=["Vile","Raptor","Wood","Reaper","Wilder","Jaki","Vermin","Tyrant","Drake","Spirit","Haunt","Ghost","Zealot"];static loadFusionTableJson(L,w){const N={},$=1===w[0].length;for(const T of L)N[T]={};for(let T=0;T<w.length;T++){const W=L[T],ee=w[T],pe=$?0:L.length-ee.length;for(let fe=0;fe<ee.length;fe++){const X=L[fe+pe],q=ee[fe];"-"!==q&&(N[W][X]=q,N[X][W]=q)}}return N}static loadFissionTableJson(L,w,N){const $={},T=1===N[0].length;for(let W=0;W<N.length;W++){const ee=L[W],pe=N[W],fe=T?0:L.length-pe.length;for(let X=0;X<pe.length;X++){const q=L[X+fe],R=pe[X];"-"!==R&&($[R]||($[R]={}),$[R][ee]||($[R][ee]=[]),$[R][ee].push(q))}}return $}static loadElementTableJson(L,w,N){const $={};for(const T of w)$[T]={};for(let T=0;T<N.length;T++){const W=L[T],ee=N[T];for(let pe=0;pe<ee.length;pe++){const X=N[T][pe];X&&($[w[pe]][W]=X)}}return $}static mergeFusionTables(L,w){const N={};for(const[$,T]of Object.entries(L))N[$]=Object.assign({},T);for(const[$,T]of Object.entries(w))N[$]=Object.assign(N[$]||{},T);return N}static mergeFissionTables(L,w){const N={};for(const[$,T]of Object.entries(L)){N[$]={};for(const[W,ee]of Object.entries(T))N[$][W]=ee.slice()}for(const[$,T]of Object.entries(w)){N[$]=N[$]||{};for(const[W,ee]of Object.entries(T))N[$][W]=ee.concat(N[$][W]||[])}return N}getLightDark(L){return-1!==O.LIGHT_RACES.indexOf(L)?1:-1!==O.DARK_RACES.indexOf(L)?-1:0}getRaceFissions(L){return this.fissionChart[L]||{}}getRaceFusions(L){return this.fusionChart[L]||{}}getRaceFusion(L,w){return this.getRaceFusions(L)[w]||""}getElemModifiers(L){const w={};for(const[N,$]of Object.entries(this.elementChart)){const T=$[L];T&&(w[T]||(w[T]=[]),w[T].push(N))}return w}getElemFusions(L){return this.elementChart[L]||{}}isConvertedRace(L){return!1}}return O})();class b extends ve{constructor(S,L,w){super(),this.elementDemons=[],this.lvlModifier=.5,this.initCharts(S,w)}initCharts(S,L){const w=S.races,N=S.table,$=[];for(let T=0;T<w.length;T++)$.push(N[T].slice(L?0:T,L?T+1:w.length)),L||($[T][0]="-");this.races=w,this.lvlModifier=L?4.25:.5,this.fissionChart=ve.loadFissionTableJson(w,this.elementDemons,$),this.fusionChart=ve.loadFusionTableJson(w,$),this.elementChart={}}}var Ce=z(2009),ue=z(2598),oe=z(8935);let re=(()=>{class O{constructor(L,w){this.fissionCalculator=Ce.RT,this.fusionCalculator=Ce.Se,this.triFissionCalculator=Ce.I4,this.triFusionCalculator=Ce.zm;const N=w.url.split("/")[1];this.compConfig=L.configs[L.configs[N]?N:"p4"],this.appName=this.compConfig.appTitle+" Fusion Calculator",this._compendium=new e(this.compConfig),this._compendium$=new Z.t(this._compendium),this.compendium=this._compendium$.asObservable(),this._fusionChart=new b(this.compConfig.normalTable,this.compConfig.races),this._fusionChart$=new Z.t(this._fusionChart),this.fusionChart=this._fusionChart$.asObservable(),this._tripleChart=new b(this.compConfig.normalTable,this.compConfig.races,!0),this._squareChart$=new Z.t({normalChart:this._fusionChart,tripleChart:this._tripleChart,raceOrder:this.compConfig.raceOrder}),this.squareChart=this._squareChart$.asObservable()}updateFusionSettings(L){}static#e=this.\u0275fac=function(w){return new(w||O)(ue.KVO(Ce.HI),ue.KVO(oe.Ix))};static#t=this.\u0275prov=ue.jDH({token:O,factory:O.\u0275fac})}return O})()},5979:(Ke,Ie,z)=>{z.d(Ie,{I:()=>ue});var Z=z(177),e=z(3887),ve=z(9447),b=z(3822),Ce=z(2598);let ue=(()=>{class oe{static forRoot(){return{ngModule:oe}}static#e=this.\u0275fac=function(S){return new(S||oe)};static#t=this.\u0275mod=Ce.$C({type:oe});static#n=this.\u0275inj=Ce.G2t({imports:[Z.MD,e.G,ve.SharedCompendiumModule,b.S]})}return oe})()}}]);